{"structure":{"id":"root","component":"v2Container","direction":"row","layout":[100],"style":{"width":"100%","height":"100%"},"data":{},"children":[{"component":"v2Container","href":"v2Container","direction":"col","children":[{"theme":{"size":"medium"},"style":{"label":{}},"disabled":false,"label":"角色名","placeholder":"请输入角色名","titleMode":"col","labelWitdh":"80px","inputType":"text","rows":"2","showWordLimit":false,"clearable":false,"isRequired":false,"autoComplete":false,"visible":true,"__capacity":"1","component":"v2-form-input","href":"v2-form-input","children":[],"events":{"_op_formInput_input":{}},"id":1578839218090,"pid":1578839196114,"sizeLocked":{"widthLock":false,"heightLock":false},"animate":["","animated"],"value":"${queryRoleParams.roleName}","customClass":[],"props":["value","disabled","label","placeholder","prepend","append","titleMode","labelWitdh","inputType","rows","maxlength","minlength","prefixIcon","suffixIcon","showWordLimit","clearable","isRequired","autoComplete","suggestion","visible"],"$defaultProps":{"disabled":true,"titleMode":true,"labelWitdh":true,"inputType":true,"rows":true,"showWordLimit":true,"clearable":true,"isRequired":true,"autoComplete":true,"visible":true},"commonStyle":{"box-sizing":"border-box","animation-duration":"1s","overflow":"hidden","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px"}},{"theme":{"size":"medium"},"style":{"label":{}},"value":"${queryRoleParams.createTime}","disabled":false,"label":"创建时间","labelWitdh":"80px","placeholder":"请选择","titleMode":"col","type":"daterange","isRequired":false,"clearable":true,"format":"yyyy 年 MM 月 dd 日","valueFormat":"timestamp","align":"left","visible":true,"__capacity":"1","component":"v2-form-datepicker","href":"v2-form-datepicker","children":[],"events":{"_op_formDatePicker_picker":{}},"id":1578886111204,"pid":1578839196114,"sizeLocked":{"widthLock":false,"heightLock":false},"animate":["","animated"],"customClass":[],"props":["value","disabled","label","labelWitdh","placeholder","titleMode","type","isRequired","clearable","format","valueFormat","align","visible"],"$defaultProps":{"disabled":true,"labelWitdh":true,"placeholder":true,"titleMode":true,"isRequired":true,"clearable":true,"format":true,"align":true,"visible":true},"commonStyle":{"box-sizing":"border-box","animation-duration":"1s","overflow":"hidden","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px"}},{"theme":{"btnType":"primary","size":"medium"},"style":{"btnStyle":{}},"disabled":false,"loading":false,"btnName":"查询","shape":"def","visible":true,"__capacity":"1","component":"v2-component-btn","href":"v2-component-btn","children":[],"events":{"_op_componentBtn_btn":{"click":["v2_component_btn_1578887267000"]}},"id":1578839255372,"pid":1578839196114,"sizeLocked":{"widthLock":false,"heightLock":false},"animate":["","animated"],"customClass":[],"props":["disabled","loading","btnName","leftIcon","rightIcon","shape","visible"],"$defaultProps":{"disabled":true,"loading":true,"shape":true,"visible":true},"commonStyle":{"box-sizing":"border-box","animation-duration":"1s","overflow":"hidden","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px","flex-shrink":"0"}}],"style":{},"id":1578839196114,"pid":"root","ctnStyle":[{},{},{}],"customClass":[],"sizeLocked":{"widthLock":true,"heightLock":false},"animate":["","animated",""],"props":[],"events":{"_op_content":{}},"commonStyle":{"display":"flex","align-items":"center","align-self":"stretch","height":"auto","box-sizing":"border-box","min-width":"50px","overflow":"hidden","flex-shrink":"0","min-height":"50px","animation-duration":"1s"}},{"component":"v2Container","href":"v2Container","direction":"col","children":[{"theme":{"btnType":"primary","size":"medium"},"style":{"btnStyle":{}},"disabled":false,"loading":false,"btnName":"新增角色","shape":"def","visible":true,"__capacity":"1","component":"v2-component-btn","href":"v2-component-btn","children":[],"events":{"_op_componentBtn_btn":{"click":["v2_component_btn_1578893003000"]}},"id":1578839200941,"pid":1578839261978,"sizeLocked":{"widthLock":false,"heightLock":false},"animate":["","animated"],"customClass":[],"props":["disabled","loading","btnName","leftIcon","rightIcon","shape","visible"],"$defaultProps":{"disabled":true,"loading":true,"shape":true,"visible":true},"commonStyle":{"box-sizing":"border-box","animation-duration":"1s","overflow":"hidden","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px","flex-shrink":"0"}},{"theme":{"btnType":"primary","size":"medium"},"style":{"btnStyle":{}},"disabled":false,"loading":false,"btnName":"导入","shape":"def","visible":true,"__capacity":"1","component":"v2-component-btn","href":"v2-component-btn","children":[],"events":{"_op_componentBtn_btn":{"click":["v2_component_btn_1579240033000"]}},"id":1579240061839,"pid":1578839261978,"customClass":[],"sizeLocked":{"widthLock":false,"heightLock":false},"animate":["","animated"],"props":["disabled","loading","btnName","leftIcon","rightIcon","shape","visible"],"$defaultProps":{"disabled":true,"loading":true,"shape":true,"visible":true},"commonStyle":{"box-sizing":"border-box","animation-duration":"1s","overflow":"hidden","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px"}},{"theme":{"btnType":"primary","size":"medium"},"style":{"btnStyle":{}},"disabled":"${isDisabled}","loading":false,"btnName":"导出excel","shape":"def","visible":"${$AUTH(`role/roleList`,1579058632986)}","__capacity":"1","component":"v2-component-btn","href":"v2-component-btn","children":[],"events":{"_op_componentBtn_btn":{"click":["v2_component_btn_1579059575000"]}},"id":1579058632986,"pid":1578839261978,"sizeLocked":{"widthLock":false,"heightLock":false},"animate":["","animated"],"customClass":[],"props":["disabled","loading","btnName","leftIcon","rightIcon","shape","visible"],"$defaultProps":{"loading":true,"shape":true,"visible":true},"commonStyle":{"box-sizing":"border-box","animation-duration":"1s","overflow":"hidden","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px","border-radius":"0px","flex-basis":"auto","flex-grow":0,"flex-shrink":0}},{"theme":{"btnType":"primary","size":"medium"},"style":{"btnStyle":{}},"disabled":"${isDisabled}","loading":false,"btnName":"导出pdf","shape":"def","visible":"${$AUTH(`role/roleList`,1579239830566)}","__capacity":"1","component":"v2-component-btn","href":"v2-component-btn","children":[],"events":{"_op_componentBtn_btn":{"click":["v2_component_btn_1579239816000"]}},"id":1579239830566,"pid":1578839261978,"customClass":[],"sizeLocked":{"widthLock":false,"heightLock":false},"animate":["","animated"],"props":["disabled","loading","btnName","leftIcon","rightIcon","shape","visible"],"$defaultProps":{"loading":true,"shape":true,"visible":true},"commonStyle":{"box-sizing":"border-box","animation-duration":"1s","overflow":"hidden","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px"}},{"theme":{"btnType":"normal","size":"medium"},"style":{"btnStyle":{}},"disabled":"${isDisabled}","loading":false,"btnName":"删除","shape":"plain","visible":true,"__capacity":"1","component":"v2-component-btn","href":"v2-component-btn","children":[],"events":{"_op_componentBtn_btn":{"click":["v2_component_btn_1578903078000"]}},"id":1579169614891,"pid":1578839261978,"sizeLocked":{"widthLock":false,"heightLock":false},"animate":["","animated"],"customClass":[],"props":["disabled","loading","btnName","leftIcon","rightIcon","shape","visible"],"$defaultProps":{"loading":true,"visible":true},"commonStyle":{"box-sizing":"border-box","animation-duration":"1s","overflow":"hidden","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px","flex-shrink":"0"}},{"theme":{"size":"medium","btnType":"normal"},"style":{"btnStyle":{}},"disabled":"${isDisablePrint}","loading":false,"btnName":"打印","shape":"plain","visible":true,"__capacity":"1","component":"v2-component-btn","href":"v2-component-btn","children":[],"events":{"_op_componentBtn_btn":{"click":["v2_component_btn_1586250496000"]}},"id":1586250571705,"pid":1578839261978,"sizeLocked":{"widthLock":false,"heightLock":false},"animate":["","animated"],"props":["disabled","loading","btnName","leftIcon","rightIcon","shape","visible"],"customClass":[],"$defaultProps":{"loading":true,"visible":true},"commonStyle":{"box-sizing":"border-box","animation-duration":"1s","overflow":"hidden","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px","flex-shrink":"0"}}],"style":{},"id":1578839261978,"pid":"root","ctnStyle":[{},{},{},{},{},{}],"sizeLocked":{"widthLock":false,"heightLock":false},"animate":["","animated",""],"customClass":[],"props":[],"events":{"_op_content":{}},"commonStyle":{"display":"flex","align-items":"flex-start","align-self":"stretch","height":"auto","box-sizing":"border-box","min-width":"50px","overflow":"hidden","min-height":"50px","animation-duration":"1s"}},{"theme":{"tableType":"border","size":"medium"},"columns":[{"active":true,"type":"text","prop":"roleName","label":"角色名称","linkTarget":"_blank","headerAlign":"left","align":"left","sortable":true,"openFilter":false,"combi":[{"active":"true"}],"tagMap":[{"active":"true","type":"text"}],"iconMap":[{"active":"true"}],"filterMap":[{"active":"true"}]},{"active":true,"type":"text","prop":"creator","label":"创建用户","linkTarget":"_blank","headerAlign":"left","align":"left","sortable":true,"openFilter":false,"combi":[{"active":"true"}],"tagMap":[{"active":"true","type":"text"}],"iconMap":[{"active":"true"}],"filterMap":[{"active":"true"}]},{"active":true,"type":"text","prop":"createTime","label":"创建时间","linkTarget":"_blank","headerAlign":"left","align":"left","sortable":true,"openFilter":false,"combi":[{"active":"true"}],"tagMap":[{"active":"true","type":"text"}],"iconMap":[{"active":"true"}],"filterMap":[{"active":"true"}]},{"active":true,"type":"text","prop":"editor","label":"最近修改用户","linkTarget":"_blank","headerAlign":"left","align":"left","sortable":false,"openFilter":false,"combi":[{"active":"true"}],"tagMap":[{"active":"true","type":"text"}],"iconMap":[{"active":"true"}],"filterMap":[{"active":"true"}]},{"active":true,"type":"text","prop":"editTime","label":"最近修改时间","linkTarget":"_blank","headerAlign":"left","align":"left","sortable":true,"openFilter":false,"combi":[{"active":"true"}],"tagMap":[{"active":"true","type":"text"}],"iconMap":[{"active":"true"}],"filterMap":[{"active":"true"}],"useMinWidth":true},{"active":true,"type":"text","prop":"desp","label":"描述","linkTarget":"_blank","headerAlign":"left","align":"left","sortable":false,"openFilter":false,"combi":[{"active":"true"}],"tagMap":[{"active":"true","type":"text"}],"iconMap":[{"active":"true"}],"filterMap":[{"active":"true"}]}],"openIndex":false,"openPage":true,"toolBar":true,"toolTitle":"操作","toolWidth":"280","toolBtns":[{"active":"true","btnName":"关联菜单","type":"text","handler":"openAssociateMenuSubPage"},{"active":true,"btnName":"关联权限","type":"text","handler":"openAssociateAuthSubPage"},{"active":true,"btnName":"关联组件","type":"text","handler":"openComponentPage"},{"active":true,"btnName":"编辑","type":"text","handler":"openEditRoleSubPage"}],"expand":false,"visible":true,"__capacity":"1","component":"v2-component-table","href":"v2-component-table","children":[],"events":{"_op_table_table":{"selection-change":["v2_component_table_1578902624000"]}},"id":1578839285432,"pid":"root","sizeLocked":{"widthLock":true,"heightLock":false},"animate":["","animated"],"tableData":"${roleTableData}","customClass":[],"selection":"multi","tHeight":"100%","tMaxHeight":"100%","openSetPageCallback":true,"setPageCallback":"getPageRoleList","totalCount":"${roleTotalCount}","props":["columns","tableData","selection","radioSelect","value","selectionLocation","tHeight","tMaxHeight","openIndex","loading","indexLocation","openPage","pagerCount","pageSizes","pageSize","openSetPageCallback","setPageCallback","currentPage","totalCount","toolBar","toolTitle","toolLocation","toolWidth","toolBtns","expand","expandMap","visible"],"pageSize":"${pageSize}","$defaultProps":{"tHeight":true,"tMaxHeight":true,"openIndex":true,"openPage":true,"toolTitle":true,"expand":true,"visible":true},"commonStyle":{"box-sizing":"border-box","animation-duration":"1s","overflow":"hidden","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px","flex-basis":"100%","width":"calc(calc(100% - 20px))","height":"auto"}},{"total":"${roleTotalCount}","pageSize":"${pageSize}","isShowTotal":"true","isShowPageSize":true,"isForward":true,"visible":"false","__capacity":"1","component":"v2-pagination","href":"v2-pagination","children":[],"events":{"_op_pagination":{"current-change":["v2_pagination_1578899748000"],"size-change":["v2_pagination_1578900328000"]}},"id":1578839881638,"pid":"root","sizeLocked":{"widthLock":false,"heightLock":false},"animate":["","animated"],"currentPage":"${currentPage}","customClass":["common-pagination"],"commonStyle":{"box-sizing":"border-box","animation-duration":"1s","overflow":"hidden","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px"}}],"events":{},"commonStyle":{"display":"flex","align-items":"flex-start","align-self":"stretch","height":"100%","box-sizing":"border-box","min-width":"50px","overflow":"hidden","flex-direction":"column","min-height":"50px","animation-duration":"1s"},"ctnStyle":[{},{},{},{}],"realSize":[],"sizeLocked":{"widthLock":false,"heightLock":false},"animate":["","animated"],"props":[]},"forms":[],"logic":{"methods":[{"name":"openAddRoleSubPage","desp":"打开新增角色子页面","code":"//函数内直接用ctx代替this访问vue页面的数据。\n//console.log(row);\nconst ctx = this;\nctx.open({\n    title:'新增角色',\n    path:'add/role',\n    component:'role/addRoleSubPage',\n    type:'SUB',\n    closeOnClickModal:false,\n    hideConfirmBtn:true, \n    hideCancelBtn:true, \n    confirmCallback:() => { \n        \n        ctx.getPageRoleList();\n    },\n    cancelCallback:(e) => {\n       \n    }\n})","params":[],"isEvent":false,"custom":true},{"name":"deleteRole","desp":"删除角色","code":"//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\nvar roleIds  = [];\n\nroleIds = ctx.selectedRoleList.map(function(item){\n    \n    return item.roleId;\n});\n\nctx.$confirm('确定删除选中记录码？', '删除角色', {\n    distinguishCancelAndClose: true,\n    confirmButtonText: '确定',\n    cancelButtonText: '取消'\n}).then(() => {\n    ctx.$axios.post(`${axios.server}/role/delete`, JSON.stringify(roleIds),{\n        headers: {\n        'Content-type':'application/json'\n        }\n    }).then(res => {\n        //下一步的行为\n        if(res.success){\n            ctx.$notify({\n                type: 'success',\n                title: '删除成功'\n            });\n            ctx.getPageRoleList();\n        }else{\n            ctx.$notify({\n                title: res.msg,\n                type: 'error'\n            });\n        }\n        \n    }).catch(function (error) {\n        console.log(error);\n        ctx.$notify({\n            title: error.msg || '删除失败',\n            type: 'error'\n        });\n    });\n\n}).catch(action => {\n\n});","params":[],"isEvent":false,"custom":true},{"name":"openAssociateMenuSubPage","desp":"打开关联菜单子页面","code":"//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\n\nctx.open({\n    title:'关联菜单',\n    path:'associate/menu',\n    component:'role/menuListSubPage',\n    type:'SUB',\n    height:'600px',\n    closeOnClickModal:false,\n    hideConfirmBtn:true, \n    hideCancelBtn:true, \n    params:{id:row?row.roleId:'',menus:row.menus},\n    confirmCallback:() => { \n        ctx.getPageRoleList(ctx.currentPage);\n    },\n    cancelCallback:(e) => {\n        console.log('点击取消')\n    }\n})","params":[{"name":"index","desp":"索引"},{"name":"row","desp":"行数据"}],"isEvent":false,"custom":true},{"name":"openAssociateAuthSubPage","desp":"打开关联权限子页面","code":"//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\n\nctx.open({\n    title:'关联权限',\n    path:'asssociate/authority',\n    component:'role/authoritySubPage',\n    type:'SUB',\n    height:'600px',\n    closeOnClickModal:false,\n    hideConfirmBtn:true, \n    hideCancelBtn:true, \n    params:{id:row?row.roleId:'',authorities:row.authorities},\n    confirmCallback:() => { \n       ctx.getPageRoleList(ctx.currentPage);\n    },\n    cancelCallback:(e) => {\n        console.log('点击取消')\n    }\n})","params":[{"name":"index","desp":"索引"},{"name":"row","desp":"行数据"}],"isEvent":false,"custom":true},{"name":"getPageRoleList","desp":"获取分页角色列表","code":"//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\npage&&(ctx.currentPage=page);\n!page&&(ctx.currentPage=1);\nsize&&(ctx.pageSize=size);\n!size&&(ctx.pageSize=10);\nconst params = {\n  \"pageNum\": ctx.currentPage,\n  \"pageSize\": ctx.pageSize,\n  \"orders\": [\n    {\n      \"key\": \"createTime\",\n      \"order\": \"desc\"\n    }\n  ],\n  \"query\": {\n\n    \"name\": ctx.queryRoleParams.roleName||'',\n  },\n  \"ranges\": [\n    {\n      \"from\": ctx.queryRoleParams.createTime?ctx.queryRoleParams.createTime[0]:null,\n      \"key\": \"createTime\",\n      \"to\":  ctx.queryRoleParams.createTime?ctx.queryRoleParams.createTime[1]+1000*60*60*24-1:null\n    }\n  ]\n};\n//console.log(ctx.__getVueIns('_op_pagination'));\nctx.$axios.post(`${axios.server}/role/list`,params).then(res=>{\n    if(res.success&&res.status){\n      const tableData = res.obj&&res.obj.content||[];\n      \n      ctx.roleTableData  = tableData.map(function(item){\n        return{\n          roleId:item.id,\n          menus:item.menus||[],\n          authorities:item.authorities||[],\n          roleName:item.name||'',\n          desp:item.desc||'',\n          createTime:ctx.timesTransferToDate(item.createTime),\n          creator:item.createUserName,\n          editor:item.updateUserName,\n          editTime:ctx.timesTransferToDate(item.updateTime)\n        }\n      });\n      ctx.roleTotalCount = res.obj&&res.obj.totalElements;\n    }\n}).catch(error=>{\n  \n})","params":[{"name":"page","desp":"当前页码"},{"name":"size","desp":"单页数量"}],"isEvent":false,"custom":true},{"name":"v2_component_btn_1578887267000","desp":"查询角色数据","code":"/**\n* 事件绑定在vue实例上，第一个参数是vue实例。\n* 更多其他参数可以参考element-ui官网:https://element.eleme.cn/#/zh-CN\n**/\n\n//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\n\nctx.currentPage = 1;\nctx.getPageRoleList();","params":[{"name":"vueIns","desp":"组件的vue实例"}],"isEvent":true,"custom":true,"id":1578887267000},{"name":"v2_component_btn_1578893003000","desp":"打开新增角色子页面","code":"/**\n* 事件绑定在vue实例上，第一个参数是vue实例。\n* 更多其他参数可以参考element-ui官网:https://element.eleme.cn/#/zh-CN\n**/\n\n//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\n/**\n方法名称：openAddRoleSubPage\n方法描述：打开新增角色子页面\n\n**/\nctx.openAddRoleSubPage();","params":[{"name":"vueIns","desp":"组件的vue实例"}],"isEvent":true,"custom":true,"id":1578893003000},{"name":"timesTransferToDate","desp":"时间转换","code":"//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\n\nif(timestamp){\n    var date = new Date(Number(timestamp)),\n        Y = date.getFullYear() + '-',\n        M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1),\n        D = date.getDate()<10?'0'+date.getDate():date.getDate(),\n        h = date.getHours()<10?'0'+date.getHours():date.getHours(),\n        m = date.getMinutes()<10? '0'+date.getMinutes():date.getMinutes(),\n        s = date.getSeconds()<10?'0'+date.getSeconds():date.getSeconds();\n\n    return Y +'-'+ M +'-'+ D +' '+ h +':'+ m +':'+ s;\n}else{\n    return '';\n}","params":[{"name":"timestamp","desp":"时间戳"}],"isEvent":false,"custom":true},{"name":"v2_pagination_1578899748000","desp":"v2_pagination_1578899748000","code":"/**\n* 事件绑定在vue实例上，第一个参数是vue实例。\n* 更多其他参数可以参考element-ui官网:https://element.eleme.cn/#/zh-CN\n**/\n\n//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\n\nctx.currentPage = currentPage;\nctx.getPageRoleList(currentPage);","params":[{"name":"vueIns","desp":"组件的vue实例"},{"name":"currentPage","desp":"当前页码"}],"isEvent":true,"custom":true,"id":1578899748000},{"name":"v2_pagination_1578900328000","desp":"v2_pagination_1578900328000","code":"/**\n* 事件绑定在vue实例上，第一个参数是vue实例。\n* 更多其他参数可以参考element-ui官网:https://element.eleme.cn/#/zh-CN\n**/\n\n//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\n//ctx.__getVueIns('').refs.\nctx.pageSize = pageSize;\nctx.getPageRoleList();","params":[{"name":"vueIns","desp":"组件的vue实例"},{"name":"pageSize","desp":"每页个数"}],"isEvent":true,"custom":true,"id":1578900328000},{"name":"v2_component_table_1578902624000","desp":"表格复选框状态改变时获取选中的数据","code":"/**\n* 事件绑定在vue实例上，第一个参数是vue实例。\n* 更多其他参数可以参考element-ui官网:https://element.eleme.cn/#/zh-CN\n**/\n\n//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\nctx.selectedRoleList = selections||[];\n\nif (selections.length > 0) {\n    ctx.isDisabled = false;\n    (selections.length===1)?(ctx.isDisablePrint = false):(ctx.isDisablePrint = true);\n}else {\n    ctx.isDisabled = true;\n    ctx.isDisablePrint = true;\n}","params":[{"name":"vueIns","desp":"组件的vue实例"},{"name":"selections","desp":"选中的数据"}],"isEvent":true,"custom":true,"id":1578902624000},{"name":"v2_component_btn_1578903078000","desp":"删除选中的角色数据","code":"/**\n* 事件绑定在vue实例上，第一个参数是vue实例。\n* 更多其他参数可以参考element-ui官网:https://element.eleme.cn/#/zh-CN\n**/\n\n//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\n/**\n方法名称：deleteRole\n方法描述：删除角色\n\n**/\nctx.deleteRole();","params":[{"name":"vueIns","desp":"组件的vue实例"}],"isEvent":true,"custom":true,"id":1578903078000},{"name":"openEditRoleSubPage","desp":"编辑角色页面","code":"//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\nctx.open({\n    title:'编辑角色',\n    path:'edit/role',\n    component:'role/addRoleSubPage',\n    type:'SUB',\n    closeOnClickModal:false,\n    hideConfirmBtn:true, \n    hideCancelBtn:true, \n    params:{id:row?row.roleId:''},\n    confirmCallback:() => { \n        \n        ctx.getPageRoleList(ctx.currentPage);\n    },\n    cancelCallback:(e) => {\n       \n    }\n})","params":[{"name":"index","desp":"索引"},{"name":"row","desp":"行数据"}],"isEvent":false,"custom":true},{"name":"exportExcel","desp":"导出excel","code":"//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\nvar rows  = [];\n\nrows = ctx.selectedRoleList.map(function(item){\n    \n    return   {\n        \"createTime\": item.createTime,\n        \"createUserName\":item.creator,\n        \"desc\": item.desp,\n        \"id\": item.roleId,\n        \"name\": item.roleName,\n        \"updateTime\": item.editTime,\n        \"updateUserName\": item.editor\n    };\n});\n\nctx.$confirm('确定导出选中记录码？', '导出excel', {\n    distinguishCancelAndClose: true,\n    confirmButtonText: '确定',\n    cancelButtonText: '取消'\n}).then(() => {\n    ctx.$axios.post(`${axios.server}//role/export/excel`, JSON.stringify(rows),{\n        headers: {\n            'Content-type':'application/json'\n        },\n        responseType: 'blob'\n    }).then(res => {\n        //下一步的行为\n        if(!res){\n            ctx.$notify({\n                title: res.msg,\n                type: '导出失败'\n            });\n            return ;\n        }else{\n            ctx.downloadFile(res,'xlsx');\n            ctx.$notify({\n                type: 'success',\n                title: '导出成功'\n            });\n        }\n        \n    }).catch(function (error) {\n        console.log(error);\n        ctx.$notify({\n            title: error.msg || '导出失败',\n            type: 'error'\n        });\n    });\n\n}).catch(action => {\n\n});","params":[],"isEvent":false,"custom":true},{"name":"exportPdf","desp":"导出pdf","code":"//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\nvar rows  = [];\n\nrows = ctx.selectedRoleList.map(function(item){\n    \n    return   {\n        \"createTime\": item.createTime,\n        \"createUserName\":item.creator,\n        \"desc\": item.desp,\n        \"id\": item.roleId,\n        \"name\": item.roleName,\n        \"updateTime\": item.editTime,\n        \"updateUserName\": item.editor\n    };\n});\n\nctx.$confirm('确定导出选中记录码？', '导出PDF', {\n    distinguishCancelAndClose: true,\n    confirmButtonText: '确定',\n    cancelButtonText: '取消'\n}).then(() => {\n\n    ctx.$axios.post(`${axios.server}/role/export/pdf`, JSON.stringify(rows),{\n        headers: {\n        'Content-type':'application/json'\n        },\n        responseType: 'blob'\n    }).then(res => {\n        //下一步的行为\n        if(!res){\n            ctx.$notify({\n                title: res.msg,\n                type: '导出失败'\n            });\n            return ;\n        }else{\n            ctx.downloadFile(res,'pdf');\n            ctx.$notify({\n                type: 'success',\n                title: '导出成功'\n            });\n        }\n        \n    }).catch(function (error) {\n        console.log(error);\n        ctx.$notify({\n            title: error.msg || '导出失败',\n            type: 'error'\n        });\n    });\n\n}).catch(action => {\n\n});","params":[],"isEvent":false,"custom":true},{"name":"v2_component_btn_1579059575000","desp":"导出excel文件","code":"/**\n* 事件绑定在vue实例上，第一个参数是vue实例。\n* 更多其他参数可以参考element-ui官网:https://element.eleme.cn/#/zh-CN\n**/\n\n//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\n/**\n方法名称：exportExcel\n方法描述：导出excel\n\n**/\nctx.exportExcel();","params":[{"name":"vueIns","desp":"组件的vue实例"}],"isEvent":true,"custom":true,"id":1579059575000},{"name":"v2_component_btn_1579059590000","desp":"v2_component_btn_1579059590000","code":"/**\n* 事件绑定在vue实例上，第一个参数是vue实例。\n* 更多其他参数可以参考element-ui官网:https://element.eleme.cn/#/zh-CN\n**/\n\n//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\n/**\n方法名称：exportPdf\n方法描述：导出pdf\n\n**/\nctx.exportPdf();","params":[{"name":"vueIns","desp":"组件的vue实例"}],"isEvent":false,"custom":true},{"name":"downloadFile","desp":"导出文件","code":"//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\n\nif(data){\n    var blob = new Blob([data], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8' }),\n        url = window.URL.createObjectURL(blob),\n        aLink = document.createElement(\"a\");\n        \n    aLink.style.display = \"none\";\n    aLink.href = url;\n    aLink.setAttribute(\"download\",new Date().getTime() + \".\"+type);\n    document.body.appendChild(aLink);\n    aLink.click();\n    console.log(aLink.getAttribute('href'));\n    document.body.removeChild(aLink); //下载完成移除元素\n    window.URL.revokeObjectURL(url); \n}","params":[{"name":"data","desp":"数据流"},{"name":"type","desp":"文件类型"}],"isEvent":false,"custom":true},{"name":"v2_component_btn_1579239816000","desp":"导出pdf文件","code":"/**\n* 事件绑定在vue实例上，第一个参数是vue实例。\n* 更多其他参数可以参考element-ui官网:https://element.eleme.cn/#/zh-CN\n**/\n\n//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\n/**\n方法名称：exportPdf\n方法描述：导出pdf\n\n**/\nctx.exportPdf();","params":[{"name":"vueIns","desp":"组件的vue实例"}],"isEvent":true,"custom":true,"id":1579239816000},{"name":"v2_component_btn_1579240033000","desp":"打开导入子页面","code":"/**\n* 事件绑定在vue实例上，第一个参数是vue实例。\n* 更多其他参数可以参考element-ui官网:https://element.eleme.cn/#/zh-CN\n**/\n\n//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\nctx.openImportFilePage();\n// ctx.open({\n//     title:'导入流程',\n//     path:'role/import',\n//     component:'role/importFileTemplate',\n//     type:'SUB',\n//     closeOnClickModal:false,\n//     hideConfirmBtn:true, \n//     hideCancelBtn:true, \n//     confirmCallback:() => { \n//         ctx.getPageRoleList();\n//     },\n//     cancelCallback:(e) => {\n\n//     }\n// });","params":[{"name":"vueIns","desp":"组件的vue实例"}],"isEvent":true,"custom":true,"id":1579240033000},{"name":"openImportFilePage","desp":"打开导入子页面","code":"//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\nctx.open({\n    title:'导入流程',\n    path:'role/import',\n    component:'role/importFileTemplate',\n    type:'SUB',\n    closeOnClickModal:false,\n    hideConfirmBtn:true, \n    hideCancelBtn:true, \n    confirmCallback:() => { \n        ctx.getPageRoleList();\n    },\n    cancelCallback:(e) => {\n\n    }\n});","params":[],"isEvent":false,"custom":true},{"name":"v2_component_btn_1586250496000","desp":"打印","code":"/**\n* 事件绑定在vue实例上，第一个参数是vue实例。\n* 更多其他参数可以参考element-ui官网:https://element.eleme.cn/#/zh-CN\n**/\n\n//函数内直接用ctx代替this访问vue页面的数据。\n/** @type {V2ViewType} */\nconst ctx = this;\nctx.printPage();","params":[{"name":"vueIns","desp":"组件的vue实例"}],"isEvent":true,"custom":true,"id":1586250496000},{"name":"printPage","desp":"打印数据","code":"// 函数内直接用 ctx 代替 this 访问 Vue 页面的数据。\n/** @type {V2ViewType} */\n//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\nvar rows = [];\n\nrows = ctx.selectedRoleList.map(function (item) {\n\n    return {\n        \"createTime\": item.createTime,\n        \"createUserName\": item.creator,\n        \"desc\": item.desp,\n        \"id\": item.roleId,\n        \"name\": item.roleName,\n        \"updateTime\": item.editTime,\n        \"updateUserName\": item.editor\n    };\n});\n\nif ($('iframe#printIframe') && $('iframe#printIframe').length) {\n\n    $('iframe#printIframe').remove();\n}\nvar printIframe = document.createElement(\"iframe\");\n\nprintIframe.style.display = \"none\";\nprintIframe.id = \"printIframe\";\nprintIframe.src = `${axios.server}/templates/preview?desc=${rows[0].desc}&name=${rows[0].name}`;\ndocument.body.appendChild(printIframe);\n$(\"#printIframe\")[0].contentWindow.print();","params":[],"isEvent":false,"custom":true},{"name":"openComponentPage","desp":"打开关联组件子页面","code":"// 函数内直接用 ctx 代替 this 访问 Vue 页面的数据。\n/** @type {V2ViewType} */\nconst ctx = this;\n\nctx.open({\n    title:'关联组件',\n    path:'associate/component',\n    component:'role/componentAuthority',\n    type:'SUB',\n    customClass:'permission-dialog',\n    height:'600px',\n    closeOnClickModal:false,\n    hideConfirmBtn:true, \n    hideCancelBtn:true, \n    params:{id:row?row.roleId:''},\n    confirmCallback:() => { \n        ctx.getPageRoleList(ctx.currentPage);\n    },\n    cancelCallback:(e) => {\n        console.log('点击取消')\n    }\n})","params":[{"name":"index","desp":"行号"},{"name":"row","desp":"行数据"}],"isEvent":false,"custom":true}],"watch":{},"beforeCreate":{"code":"let ctx = this;"},"created":{"code":"let ctx = this;"},"beforeMount":{"code":"let ctx = this;"},"mounted":{"code":"const ctx = this;"},"beforeUpdate":{"code":"let ctx = this;"},"updated":{"code":"let ctx = this;"},"beforeDestroy":{"code":"let ctx = this;"},"destroyed":{"code":"let ctx = this;"},"activated":{"code":"let ctx = this;"},"deactivated":{"code":"let ctx = this;"},"pollList":[],"url2data":{"vdaSource":[]}},"dataBasket":{"data":{},"list":[{"desp":"角色表格数据","name":"roleTableData","code":"[]","source":"pageData","belongTo":"data","type":"data","showSet":false,"sync":false},{"desp":"查询角色列表参数对象","name":"queryRoleParams","code":"{\n    roleName:'',\n    createTime:''\n}","source":"pageData","belongTo":"data","type":"data","showSet":false,"sync":false},{"desp":"角色列表总数","name":"roleTotalCount","code":"0","source":"pageData","belongTo":"data","type":"data","showSet":false,"sync":false},{"desp":"角色表格每页数量","name":"pageSize","code":"10","source":"pageData","belongTo":"data","type":"data","showSet":false,"sync":false},{"desp":"当前页码","name":"currentPage","code":"1","source":"pageData","belongTo":"data","type":"data","showSet":false,"sync":false},{"desp":"是否禁用","name":"isDisabled","code":"true","source":"pageData","belongTo":"data","type":"data","showSet":false,"sync":false},{"desp":"选中的数据","name":"selectedRoleList","code":"[]","source":"pageData","belongTo":"data","type":"data","showSet":false,"sync":false},{"desp":"禁止打印按钮","name":"isDisablePrint","code":"true","source":"pageData","belongTo":"data","type":"data","showSet":false,"sync":false}],"mapping":{"1578839285432":[{"id":1578839285432,"modelValue":"pageSize","dataValue":"pageSize","type":""},{"id":1578839285432,"modelValue":"totalCount","dataValue":"roleTotalCount","type":""},{"id":1578839285432,"modelValue":"tableData","dataValue":"roleTableData","type":""}],"1578839218090":[{"id":1578839218090,"modelValue":"value","dataValue":"queryRoleParams.roleName","type":""}],"1578886111204":[{"id":1578886111204,"modelValue":"value","dataValue":"queryRoleParams.createTime","type":""}],"1578839881638":[{"id":1578839881638,"modelValue":"total","dataValue":"roleTotalCount","type":""},{"id":1578839881638,"modelValue":"pageSize","dataValue":"pageSize","type":""},{"id":1578839881638,"modelValue":"currentPage","dataValue":"currentPage","type":""}],"1578839276942":[{"id":1578839276942,"modelValue":"disabled","dataValue":"isDisabled","type":"boolean"}],"1579058658755":[{"id":1579058658755,"modelValue":"disabled","dataValue":"isDisabled","type":"boolean"}],"1579058632986":[{"id":1579058632986,"modelValue":"visible","dataValue":"$AUTH(`role/roleList`,1579058632986)","type":""},{"id":1579058632986,"modelValue":"disabled","dataValue":"isDisabled","type":"boolean"}],"1579070147220":[{"id":1579070147220,"modelValue":"disabled","dataValue":"isDisabled","type":"boolean"}],"1579169614891":[{"id":1579169614891,"modelValue":"disabled","dataValue":"isDisabled","type":"boolean"}],"1579239830566":[{"id":1579239830566,"modelValue":"disabled","dataValue":"isDisabled","type":"boolean"},{"id":1579239830566,"modelValue":"visible","dataValue":"$AUTH(`role/roleList`,1579239830566)","type":""}],"1586250571705":[{"id":1586250571705,"modelValue":"disabled","dataValue":"isDisablePrint","type":"boolean"}]}},"events":{},"display":{"icon":"icontongyong","desp":"角色管理","type":"gridLayout","width":"800px","height":"1080px"},"scssCode":"","nls":"","mixins":[],"imports":[],"disableVueSPA":true}