(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["role-roleList"],{fe10:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v2container",{staticClass:"v2Container-root V2Container",staticStyle:{display:"flex","align-items":"flex-start","align-self":"stretch",height:"100%","box-sizing":"border-box","min-width":"50px",overflow:"hidden","flex-direction":"column","min-height":"50px","animation-duration":"1s","flex-shrink":"0"},attrs:{wid:"root"}},[a("div",{ref:"v2Container_1578839196114",staticClass:"v2Container-1578839196114 V2Container",staticStyle:{display:"flex","align-items":"center","align-self":"stretch",height:"auto","box-sizing":"border-box","min-width":"50px",overflow:"hidden","flex-shrink":"0","min-height":"50px","animation-duration":"1s","flex-direction":"row"},attrs:{wid:"1578839196114"}},[a("v2-form-input",{ref:"v2FormInput_1",staticClass:"v2-form-input-1603072569815 V2Widget",style:{"align-self":"auto"},attrs:{wid:"1603072569815",theme:{size:""},disabled:!1,label:"角色名",placeholder:"请输入角色名","title-mode":"col","label-witdh":"80px","input-type":"text",rows:2,"show-word-limit":!1,clearable:!1,"is-required":!1,"auto-complete":!1,if:!0,value:e.queryRoleParams.roleName},on:{"update:value":function(t){return e.$set(e.queryRoleParams,"roleName",t)}}}),a("v2-form-datepicker",{ref:"v2FormDatepicker_1",staticClass:"v2-form-datepicker-1603072597918 V2Widget",style:{"align-self":"auto"},attrs:{wid:"1603072597918",theme:{size:""},disabled:!1,label:"创建时间","label-witdh":"80px",placeholder:"请选择","title-mode":"col",type:"daterange","is-required":!1,clearable:!0,format:"yyyy 年 MM 月 dd 日","value-format":"timestamp",align:"left","disabled-date-list":[],if:!0,value:e.queryRoleParams.createTime},on:{"update:value":function(t){return e.$set(e.queryRoleParams,"createTime",t)}}}),a("v2-component-btn",{ref:"v2-component-btn_1578839255372",staticClass:"v2-component-btn-1578839255372 V2Widget",style:{"animation-duration":"1s",overflow:"hidden","margin-top":"10px","margin-left":"10px","margin-right":"10px","flex-shrink":0},attrs:{wid:"1578839255372",theme:{btnType:"primary",size:"medium"},"btn-name":"查询"},on:{"_op_component-btn_btn:click":e.v2_component_btn_1578887267000}})],1),a("div",{ref:"v2Container_1578839261978",staticClass:"v2Container-1578839261978 V2Container",staticStyle:{display:"flex","align-items":"flex-start","align-self":"stretch",height:"auto","box-sizing":"border-box","min-width":"50px",overflow:"hidden","min-height":"50px","animation-duration":"1s","flex-shrink":"0","flex-direction":"row"},attrs:{wid:"1578839261978"}},[a("v2-component-btn",{ref:"v2-component-btn_1578839200941",staticClass:"v2-component-btn-1578839200941 V2Widget",style:{"animation-duration":"1s",overflow:"hidden","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px","flex-shrink":"0"},attrs:{wid:"1578839200941",theme:{btnType:"primary",size:"medium"},"btn-name":"新增角色"},on:{"_op_component-btn_btn:click":e.v2_component_btn_1578893003000}}),a("v2-component-btn",{ref:"v2-component-btn_1579169614891",staticClass:"V2Widget",style:{"animation-duration":"1s",overflow:"hidden","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px","flex-shrink":0},attrs:{wid:"1579169614891",disabled:e.isDisabled,theme:{btnType:"normal",size:"medium"},"btn-name":"删除",shape:"plain"},on:{"_op_component-btn_btn:click":e.v2_component_btn_1578903078000}})],1),a("v2-component-table",{ref:"v2-component-table_1578839285432",staticClass:"v2-component-table-1578839285432 V2Widget",style:{"animation-duration":"1s",overflow:"hidden","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px","flex-basis":"100%",width:"calc(100% - 20px)",height:"auto","flex-shrink":0},attrs:{wid:"1578839285432",tableData:e.roleTableData,pageSize:e.pageSize,totalCount:e.roleTotalCount,theme:{tableType:"border",size:"medium"},columns:[{active:!0,type:"text",prop:"roleName",label:"角色名称",linkTarget:"_blank",headerAlign:"left",align:"left",sortable:!0,openFilter:!1,combi:[{active:"true"}],tagMap:[{active:"true",type:"text"}],iconMap:[{active:"true"}],filterMap:[{active:"true"}]},{active:!0,type:"text",prop:"creator",label:"创建用户",linkTarget:"_blank",headerAlign:"left",align:"left",sortable:!0,openFilter:!1,combi:[{active:"true"}],tagMap:[{active:"true",type:"text"}],iconMap:[{active:"true"}],filterMap:[{active:"true"}]},{active:!0,type:"text",prop:"createTime",label:"创建时间",linkTarget:"_blank",headerAlign:"left",align:"left",sortable:!0,openFilter:!1,combi:[{active:"true"}],tagMap:[{active:"true",type:"text"}],iconMap:[{active:"true"}],filterMap:[{active:"true"}]},{active:!0,type:"text",prop:"editor",label:"最近修改用户",linkTarget:"_blank",headerAlign:"left",align:"left",sortable:!1,openFilter:!1,combi:[{active:"true"}],tagMap:[{active:"true",type:"text"}],iconMap:[{active:"true"}],filterMap:[{active:"true"}]},{active:!0,type:"text",prop:"editTime",label:"最近修改时间",linkTarget:"_blank",headerAlign:"left",align:"left",sortable:!0,openFilter:!1,combi:[{active:"true"}],tagMap:[{active:"true",type:"text"}],iconMap:[{active:"true"}],filterMap:[{active:"true"}],useMinWidth:!0},{active:!0,type:"text",prop:"desp",label:"描述",linkTarget:"_blank",headerAlign:"left",align:"left",sortable:!1,openFilter:!1,combi:[{active:"true"}],tagMap:[{active:"true",type:"text"}],iconMap:[{active:"true"}],filterMap:[{active:"true"}]}],"table-data":e.roleTableData,selection:"multi","t-height":"100%","t-max-height":"100%","open-index":!1,"open-page":!0,"page-size":e.pageSize,"open-set-page-callback":!0,"set-page-callback":"getPageRoleList","total-count":e.roleTotalCount,"tool-bar":!0,"tool-title":"操作","tool-width":280,"tool-btns":[{active:"true",btnName:"关联菜单",type:"text",handler:"openAssociateMenuSubPage",rowName:"",toolIcon:"",rowValue:""},{active:!0,btnName:"关联权限",type:"text",handler:"openAssociateAuthSubPage",rowName:"",toolIcon:"",rowValue:""},{active:!0,btnName:"关联组件",type:"text",handler:"openComponentPage",rowName:"",toolIcon:"",rowValue:""},{active:!0,btnName:"编辑",type:"text",handler:"openEditRoleSubPage",rowName:"",toolIcon:"",rowValue:""}],expand:!1},on:{"_op_table_table:selection-change":e.v2_component_table_1578902624000}})],1)},i=[],n=(a("c5f6"),a("7f7f"),a("a6fc")),l=a("25f3"),r={mixins:[n["b"],l["d"]],components:{},data:function(){return{CONTENT:{forms_v2:{config:[],validate_callbacks:[],submit_callbacks:[]},mapping:{1578839285432:[{id:1578839285432,modelValue:"tableData",dataValue:"roleTableData",type:""},{id:1578839285432,modelValue:"pageSize",dataValue:"pageSize",type:""},{id:1578839285432,modelValue:"totalCount",dataValue:"roleTotalCount",type:""}],1578839218090:[{id:1578839218090,modelValue:"value",dataValue:"queryRoleParams.roleName",type:""}],1578886111204:[{id:1578886111204,modelValue:"value",dataValue:"queryRoleParams.createTime",type:""}],1578839881638:[{id:1578839881638,modelValue:"total",dataValue:"roleTotalCount",type:""},{id:1578839881638,modelValue:"pageSize",dataValue:"pageSize",type:""},{id:1578839881638,modelValue:"currentPage",dataValue:"currentPage",type:""}],1578839276942:[{id:1578839276942,modelValue:"disabled",dataValue:"isDisabled",type:"boolean"}],1579058658755:[{id:1579058658755,modelValue:"disabled",dataValue:"isDisabled",type:"boolean"}],1579058632986:[{id:1579058632986,modelValue:"disabled",dataValue:"isDisabled",type:"boolean"},{id:1579058632986,modelValue:"visible",dataValue:"$AUTH(`role/roleList`,1579058632986)",type:""}],1579070147220:[{id:1579070147220,modelValue:"disabled",dataValue:"isDisabled",type:"boolean"}],1579169614891:[{id:1579169614891,modelValue:"disabled",dataValue:"isDisabled",type:"boolean"}],1579239830566:[{id:1579239830566,modelValue:"disabled",dataValue:"isDisabled",type:"boolean"},{id:1579239830566,modelValue:"visible",dataValue:"$AUTH(`role/roleList`,1579239830566)",type:""}],1586250571705:[{id:1586250571705,modelValue:"disabled",dataValue:"isDisablePrint",type:"boolean"}],1603072569815:[{id:1603072569815,modelValue:"value",dataValue:"queryRoleParams.roleName",type:""}],1603072597918:[{id:1603072597918,modelValue:"value",dataValue:"queryRoleParams.createTime",type:""}]}},roleTableData:[],queryRoleParams:{roleName:"",createTime:""},roleTotalCount:0,pageSize:10,currentPage:1,isDisabled:!0,selectedRoleList:[],isDisablePrint:!0,__VERSION:4}},props:{},computed:{},watch:{},methods:{openAddRoleSubPage:function(){var e=this;e.open({title:"新增角色",path:"add/role",component:"role/addRoleSubPage",type:"SUB",closeOnClickModal:!1,hideConfirmBtn:!0,hideCancelBtn:!0,confirmCallback:function(){e.getPageRoleList()},cancelCallback:function(e){}})},deleteRole:function(){var e=this,t=[];t=e.selectedRoleList.map((function(e){return e.roleId})),e.$confirm("确定删除选中记录码？","删除角色",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){e.$axios.post("".concat(axios.server,"/role/delete"),JSON.stringify(t),{headers:{"Content-type":"application/json"}}).then((function(t){t.success?(e.$notify({type:"success",title:"删除成功"}),e.getPageRoleList()):e.$notify({title:t.msg,type:"error"})})).catch((function(t){console.log(t),e.$notify({title:t.msg||"删除失败",type:"error"})}))})).catch((function(e){}))},openAssociateMenuSubPage:function(e,t){var a=this;a.open({title:"关联菜单",path:"associate/menu",component:"role/menuListSubPage",type:"SUB",height:"600px",closeOnClickModal:!1,hideConfirmBtn:!0,hideCancelBtn:!0,params:{id:t?t.roleId:"",menus:t.menus},confirmCallback:function(){a.getPageRoleList(a.currentPage)},cancelCallback:function(e){console.log("点击取消")}})},openAssociateAuthSubPage:function(e,t){var a=this;a.open({title:"关联权限",path:"asssociate/authority",component:"role/authoritySubPage",type:"SUB",height:"600px",closeOnClickModal:!1,hideConfirmBtn:!0,hideCancelBtn:!0,params:{id:t?t.roleId:"",authorities:t.authorities},confirmCallback:function(){a.getPageRoleList(a.currentPage)},cancelCallback:function(e){console.log("点击取消")}})},getPageRoleList:function(e,t){var a=this;e&&(a.currentPage=e),!e&&(a.currentPage=1),t&&(a.pageSize=t),!t&&(a.pageSize=10);var o={pageNum:a.currentPage,pageSize:a.pageSize,orders:[{key:"createTime",order:"desc"}],query:{name:a.queryRoleParams.roleName||""},ranges:[{from:a.queryRoleParams.createTime?a.queryRoleParams.createTime[0]:null,key:"createTime",to:a.queryRoleParams.createTime?a.queryRoleParams.createTime[1]+864e5-1:null}]};a.$axios.post("".concat(axios.server,"/role/list"),o).then((function(e){if(e.success&&e.status){var t=e.obj&&e.obj.records||[];a.roleTableData=t.map((function(e){return{roleId:e.id,menus:e.menus||[],authorities:e.authorities||[],roleName:e.name||"",desp:e.desc||"",createTime:a.timesTransferToDate(e.createTime),creator:e.createUserName,editor:e.updateUserName,editTime:a.timesTransferToDate(e.updateTime)}})),a.roleTotalCount=e.obj&&e.obj.totalElements}})).catch((function(e){}))},v2_component_btn_1578887267000:function(e){arguments.length>1&&void 0!==arguments[1]||this.$refs["v2-component-btn_1578839255372"];var t=this;t.currentPage=1,t.getPageRoleList()},v2_component_btn_1578893003000:function(e){arguments.length>1&&void 0!==arguments[1]||this.$refs["v2-component-btn_1578839200941"];var t=this;t.openAddRoleSubPage()},timesTransferToDate:function(e){if(e){var t=new Date(Number(e)),a=t.getFullYear()+"-",o=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,i=t.getDate()<10?"0"+t.getDate():t.getDate(),n=t.getHours()<10?"0"+t.getHours():t.getHours(),l=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),r=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return a+"-"+o+"-"+i+" "+n+":"+l+":"+r}return""},v2_component_table_1578902624000:function(e){var t=this;t.selectedRoleList=e||[],e.length>0?(t.isDisabled=!1,1===e.length?t.isDisablePrint=!1:t.isDisablePrint=!0):(t.isDisabled=!0,t.isDisablePrint=!0)},v2_component_btn_1578903078000:function(e){arguments.length>1&&void 0!==arguments[1]||this.$refs["v2-component-btn_1579169614891"];var t=this;t.deleteRole()},openEditRoleSubPage:function(e,t){var a=this;a.open({title:"编辑角色",path:"edit/role",component:"role/addRoleSubPage",type:"SUB",closeOnClickModal:!1,hideConfirmBtn:!0,hideCancelBtn:!0,params:{id:t?t.roleId:""},confirmCallback:function(){a.getPageRoleList(a.currentPage)},cancelCallback:function(e){}})},exportExcel:function(){var e=this,t=[];t=e.selectedRoleList.map((function(e){return{createTime:e.createTime,createUserName:e.creator,desc:e.desp,id:e.roleId,name:e.roleName,updateTime:e.editTime,updateUserName:e.editor}})),e.$confirm("确定导出选中记录码？","导出excel",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){e.$axios.post("".concat(axios.server,"//role/export/excel"),JSON.stringify(t),{headers:{"Content-type":"application/json"},responseType:"blob"}).then((function(t){t?(e.downloadFile(t,"xlsx"),e.$notify({type:"success",title:"导出成功"})):e.$notify({title:t.msg,type:"导出失败"})})).catch((function(t){console.log(t),e.$notify({title:t.msg||"导出失败",type:"error"})}))})).catch((function(e){}))},exportPdf:function(){var e=this,t=[];t=e.selectedRoleList.map((function(e){return{createTime:e.createTime,createUserName:e.creator,desc:e.desp,id:e.roleId,name:e.roleName,updateTime:e.editTime,updateUserName:e.editor}})),e.$confirm("确定导出选中记录码？","导出PDF",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){e.$axios.post("".concat(axios.server,"/role/export/pdf"),JSON.stringify(t),{headers:{"Content-type":"application/json"},responseType:"blob"}).then((function(t){t?(e.downloadFile(t,"pdf"),e.$notify({type:"success",title:"导出成功"})):e.$notify({title:t.msg,type:"导出失败"})})).catch((function(t){console.log(t),e.$notify({title:t.msg||"导出失败",type:"error"})}))})).catch((function(e){}))},v2_component_btn_1579059590000:function(e){var t=this;t.exportPdf()},downloadFile:function(e,t){if(e){var a=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"}),o=window.URL.createObjectURL(a),i=document.createElement("a");i.style.display="none",i.href=o,i.setAttribute("download",(new Date).getTime()+"."+t),document.body.appendChild(i),i.click(),console.log(i.getAttribute("href")),document.body.removeChild(i),window.URL.revokeObjectURL(o)}},openImportFilePage:function(){var e=this;e.open({title:"导入流程",path:"role/import",component:"role/importFileTemplate",type:"SUB",closeOnClickModal:!1,hideConfirmBtn:!0,hideCancelBtn:!0,confirmCallback:function(){e.getPageRoleList()},cancelCallback:function(e){}})},printPage:function(){var e=this,t=[];t=e.selectedRoleList.map((function(e){return{createTime:e.createTime,createUserName:e.creator,desc:e.desp,id:e.roleId,name:e.roleName,updateTime:e.editTime,updateUserName:e.editor}})),$("iframe#printIframe")&&$("iframe#printIframe").length&&$("iframe#printIframe").remove();var a=document.createElement("iframe");a.style.display="none",a.id="printIframe",a.src="".concat(axios.server,"/templates/preview?desc=").concat(t[0].desc,"&name=").concat(t[0].name),document.body.appendChild(a),$("#printIframe")[0].contentWindow.print()},openComponentPage:function(e,t){var a=this;a.open({title:"关联组件",path:"associate/component",component:"role/componentAuthority",type:"SUB",customClass:"permission-dialog",height:"600px",closeOnClickModal:!1,hideConfirmBtn:!0,hideCancelBtn:!0,params:{id:t?t.roleId:""},confirmCallback:function(){a.getPageRoleList(a.currentPage)},cancelCallback:function(e){console.log("点击取消")}})}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},deactivated:function(){},activated:function(){}},c=r,s=a("2877"),d=Object(s["a"])(c,o,i,!1,null,null,null);t["default"]=d.exports}}]);