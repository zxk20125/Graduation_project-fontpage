(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-userList"],{a062:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v2container",{staticClass:"V2Container",staticStyle:{display:"flex","align-items":"flex-start","align-self":"stretch",height:"100%","box-sizing":"border-box","min-width":"50px",overflow:"hidden","animation-duration":"1s","flex-direction":"column","min-height":"50px"},attrs:{wid:"root"}},[a("div",{ref:"v2Container_1578537283708",staticClass:"v2Container-1578537283708 V2Container",staticStyle:{display:"flex","align-items":"flex-start","align-self":"stretch",height:"auto","box-sizing":"border-box","min-width":"50px",overflow:"hidden","flex-shrink":"0","min-height":"50px","animation-duration":"1s","flex-direction":"row"},attrs:{wid:"1578537283708"}},[a("v2-form-input",{ref:"v2-form-input_1579152715570",staticClass:"v2-form-input-1579152715570 V2Widget",style:{"animation-duration":"1s",overflow:"hidden","margin-top":"10px","margin-left":"10px","margin-right":"10px"},attrs:{wid:"1579152715570",theme:{size:"medium"},disabled:!1,label:"用户名",placeholder:"请输入用户名","title-mode":"col","label-witdh":"80px","input-type":"text",rows:2,"show-word-limit":!1,clearable:!1,"is-required":!1,"auto-complete":!1,value:e.username},on:{"update:value":function(t){e.username=t}}}),a("v2-form-treeselect",{ref:"v2-form-treeselect_1579152759468",staticClass:"v2-form-treeselect-1579152759468 V2Widget",style:{"animation-duration":"1s",overflow:"hidden","margin-top":"10px","margin-left":"10px","margin-right":"10px","flex-shrink":"0"},attrs:{wid:"1579152759468",theme:{size:"small"},disabled:!1,"data-type":"cus",options:[{active:"true",label:"正常",value:"1",expanded:!1,checked:!1,children:[{active:"true",label:"",value:"",expanded:!1,checked:!1,children:[{active:"true",label:"",value:"",checked:!1}]}]},{active:!0,label:"异常",value:"2",expanded:!1,checked:!1,children:[{active:"true",label:"",value:"",expanded:!1,checked:!1,children:[{active:"true",label:"",value:"",checked:!1}]}]}],label:"状态",placeholder:"请选择状态",partition:"/","leaf-only":!1,"label-witdh":"80px","title-mode":"col","is-required":!1,value:e.userStatus},on:{"update:value":function(t){e.userStatus=t}}}),a("v2-form-datepicker",{ref:"v2-form-datepicker_1578537726108",staticClass:"v2-form-datepicker-1578537726108 V2Widget",style:{"animation-duration":"1s",overflow:"hidden","margin-top":"10px","margin-left":"10px","margin-right":"10px"},attrs:{wid:"1578537726108",theme:{size:"medium"},disabled:!1,label:"创建时间","label-witdh":"80px",placeholder:"请选择","title-mode":"col",type:"daterange","is-required":!1,clearable:!0,format:"yyyy 年 MM 月 dd 日","value-format":"timestamp",align:"left",value:e.createTime},on:{"update:value":function(t){e.createTime=t}}}),a("v2-component-btn",{ref:"v2-component-btn_1578539012886",staticClass:"v2-component-btn-1578539012886 common-btn-focus V2Widget",style:{"animation-duration":"1s",overflow:"hidden","margin-top":"10px","margin-left":"10px","margin-right":"10px"},attrs:{wid:"1578539012886",theme:{btnType:"primary",size:"medium"},disabled:!1,loading:!1,"btn-name":"查询",shape:"def"},on:{"_op_component-btn_btn:click":e.v2_component_btn_1578965103000}})],1),a("div",{ref:"v2Container_1578539257540",staticClass:"v2Container-1578539257540 V2Container",staticStyle:{display:"flex","align-items":"flex-start","align-self":"stretch",height:"auto","box-sizing":"border-box","min-width":"50px",overflow:"hidden","min-height":"50px","animation-duration":"1s","flex-direction":"row","flex-shrink":"0"},attrs:{wid:"1578539257540"}},[a("v2-component-btn",{ref:"v2-component-btn_1578539271197",staticClass:"v2-component-btn-1578539271197 common-btn-focus V2Widget",style:{"animation-duration":"1s",overflow:"hidden","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px","flex-shrink":0},attrs:{wid:"1578539271197",theme:{btnType:"primary",size:"medium"},disabled:!1,loading:!1,"btn-name":"新增用户",shape:"def"},on:{"_op_component-btn_btn:click":e.v2_component_btn_1578838760000}}),a("v2-component-btn",{ref:"v2-component-btn_1578539296885",staticClass:"v2-component-btn-1578539296885 common-btn-normal V2Widget",style:{"animation-duration":"1s",overflow:"hidden","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px","flex-shrink":"0"},attrs:{wid:"1578539296885",disabled:e.isDisabled,theme:{btnType:"normal",size:"medium"},loading:!1,"btn-name":"删除",shape:"plain"},on:{"_op_component-btn_btn:click":e.v2_component_btn_1578838839000}})],1),a("v2-component-table",{ref:"v2-component-table_1578539272258",staticClass:"v2-component-table-1578539272258 V2Widget",style:{"animation-duration":"1s",overflow:"hidden","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px",width:"calc(100% - 20px)",height:"100%","flex-shrink":0},attrs:{wid:"1578539272258",tableData:e.userTableList,pageSize:e.pageSize,totalCount:e.userTotalCount,theme:{tableType:"border",size:""},columns:[{active:!0,prop:"username",label:"用户名",sortable:!0,openFilter:!1,type:"text",combi:[{active:"true"}],tagMap:[{active:"true",type:"text"}],iconMap:[{active:"true"}],filterMap:[{active:"true"}]},{active:!0,prop:"nickname",label:"昵称",sortable:!0,openFilter:!1,type:"text",combi:[{active:"true"}],tagMap:[{active:"true",type:"text"}],iconMap:[{active:"true"}],filterMap:[{active:"true"}]},{active:!0,prop:"creator",label:"创建用户",sortable:!0,openFilter:!1,type:"text",combi:[{active:"true"}],tagMap:[{active:"true",type:"text"}],iconMap:[{active:"true"}],filterMap:[{active:"true"}]},{active:!0,prop:"createTime",label:"创建时间",sortable:!0,openFilter:!1,type:"text",combi:[{active:"true"}],tagMap:[{active:"true",type:"text"}],iconMap:[{active:"true"}],filterMap:[{active:"true"}]},{active:!0,prop:"editor",label:"最近修改用户",sortable:!0,openFilter:!1,type:"text",combi:[{active:"true"}],tagMap:[{active:"true",type:"text"}],iconMap:[{active:"true"}],filterMap:[{active:"true"}]},{active:!0,prop:"editTime",label:"最近修改时间",sortable:!0,openFilter:!1,type:"text",combi:[{active:"true"}],tagMap:[{active:"true",type:"text"}],iconMap:[{active:"true"}],filterMap:[{active:"true"}]},{active:!0,prop:"status",label:"状态",width:"100px",sortable:!0,openFilter:!1,type:"tag",combi:[{active:"true"}],tagMap:[{active:"true",value:"1",text:"正常",type:"text"},{active:!0,value:"2",text:"异常",type:"text"}],iconMap:[{active:"true"}],filterMap:[{active:"true"}]},{active:!0,prop:"desp",label:"描述",sortable:!1,openFilter:!1,type:"text",combi:[{active:"true"}],tagMap:[{active:"true",type:"text"}],iconMap:[{active:"true"}],filterMap:[{active:"true"}]}],"table-data":e.userTableList,selection:"multi","selection-location":"left","t-height":"100%","t-max-height":"100%","open-index":!1,"index-location":"left","open-page":!0,"page-size":e.pageSize,"open-set-page-callback":!0,"set-page-callback":"getPageUserList","total-count":e.userTotalCount,"tool-bar":!0,"tool-title":"操作列","tool-location":"right","tool-width":"150px","tool-btns":[{active:"true",btnName:"关联角色",type:"text",handler:"showRoleModal",rowName:"",toolIcon:"",rowValue:""},{active:!0,btnName:"编辑",type:"text",handler:"editUser",rowName:"",toolIcon:"",rowValue:""}],expand:!1,value:e.selectedUserList},on:{"_op_table_table:selection-change":e.v2_component_table_1578928960000,"update:value":function(t){e.selectedUserList=t}}})],1)},n=[],o=(a("c5f6"),a("7f7f"),a("a6fc")),r=a("25f3"),l={mixins:[o["b"],r["d"]],components:{},data:function(){return{CONTENT:{forms_v2:{config:[],validate_callbacks:[],submit_callbacks:[]},mapping:{1578537221490:[{id:1578537221490,modelValue:"value",dataValue:"username",type:""}],1578537355608:[{id:1578537355608,modelValue:"value",dataValue:"userStatus",type:""}],1578537726108:[{id:1578537726108,modelValue:"value",dataValue:"createTime",type:""}],1578539272258:[{id:1578539272258,modelValue:"tableData",dataValue:"userTableList",type:""},{id:1578539272258,modelValue:"value",dataValue:"selectedUserList",type:""},{id:1578539272258,modelValue:"pageSize",dataValue:"pageSize",type:""},{id:1578539272258,modelValue:"totalCount",dataValue:"userTotalCount",type:""}],1578539296885:[{id:1578539296885,modelValue:"disabled",dataValue:"isDisabled",type:"boolean"},{id:1578539296885,modelValue:"visible",dataValue:"true",type:""}],1579152110683:[{id:1579152110683,modelValue:"value",dataValue:"userStatus",type:""}],1579152715570:[{id:1579152715570,modelValue:"value",dataValue:"username",type:""}],1579153658381:[{id:1579153658381,modelValue:"value",dataValue:"userStatus",type:""}],1579152759468:[{id:1579152759468,modelValue:"value",dataValue:"userStatus",type:""}],1578539271197:[{id:1578539271197,modelValue:"visible",dataValue:"true",type:""}]}},username:"",userStatus:[],createTime:"",userTableList:[],currentPage:1,userTotalCount:1,pageSize:10,isDisabled:!0,selectedUserList:[],__VERSION:4}},props:{},computed:{},watch:{},methods:{showRoleModal:function(e,t){var a=this;a.open({title:"关联角色",path:"/associate/role",component:"user/roleListSubPage",type:"SUB",height:"600px",closeOnClickModal:!1,hideConfirmBtn:!0,hideCancelBtn:!0,params:{id:t&&t.id,roles:t.roles},confirmCallback:function(){a.getPageUserList(a.currentPage)},cancelCallback:function(e){console.log("点击取消")}})},openAddUserPage:function(){var e=this;e.open({title:"新增用户",path:"/add/user",component:"user/addUserPage",type:"SUB",closeOnClickModal:!1,hideConfirmBtn:!0,hideCancelBtn:!0,confirmCallback:function(t){t&&(t.password=t.password?e.$root.encryptByDES(t.password):""),e.$axios.post("".concat(axios.server,"/user/add"),t).then((function(t){t.success?(e.$notify({title:"新增用户成功",type:"success"}),e.getPageUserList()):e.$notify({title:t.msg,type:"error"})})).catch((function(e){console.log(e)}))},cancelCallback:function(e){console.log("点击取消")}})},deleteUser:function(){var e=this,t=this,a=[];a=t.selectedUserList.map((function(e){return e.id})),t.$confirm("确定删除选中记录码？","删除用户",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){t.$axios.post("".concat(axios.server,"/user/delete"),JSON.stringify(a),{headers:{"Content-type":"application/json"}}).then((function(a){a.success?(t.$notify({type:"success",title:"删除成功"}),t.getPageUserList()):e.$notify({title:a.msg,type:"error"})})).catch((function(e){console.log(e)}))})).catch((function(e){}))},editUser:function(e,t){var a=this;a.open({title:"编辑用户",path:"/edit/user",component:"user/editUserSubPage",type:"SUB",closeOnClickModal:!1,params:{id:t?t.id:""},hideConfirmBtn:!0,hideCancelBtn:!0,confirmCallback:function(e){e.password&&(e.password=a.$root.encryptByDES(e.password)),a.$axios.post("".concat(axios.server,"/user/update"),e).then((function(e){e.success?(a.$notify({title:"编辑用户成功",type:"success"}),a.getPageUserList(a.currentPage)):a.$notify({title:e.msg,type:"error"})})).catch((function(e){console.log(e)}))},cancelCallback:function(e){console.log("点击取消")}})},v2_component_btn_1578838760000:function(e){arguments.length>1&&void 0!==arguments[1]||this.$refs["v2-component-btn_1578539271197"];var t=this;t.openAddUserPage()},v2_component_btn_1578838839000:function(e){arguments.length>1&&void 0!==arguments[1]||this.$refs["v2-component-btn_1578539296885"];var t=this;t.deleteUser()},getPageUserList:function(e,t){var a=this;e&&(a.currentPage=e),!e&&(a.currentPage=1),t&&(a.pageSize=t),!t&&(a.pageSize=10);var i={pageNum:a.currentPage,pageSize:a.pageSize,orders:[{key:"create_Time",order:"desc"}],query:{name:a.username||"",status:1===a.userStatus.length?a.userStatus[0]:""},ranges:[{from:a.createTime?a.createTime[0]:null,key:"create_Time",to:a.createTime?a.createTime[1]+864e5-1:null}]};a.$axios.post("".concat(axios.server,"/user/list"),i).then((function(e){if(e.success&&e.status){var t=e.obj&&e.obj.records||[];a.userTableList=t.map((function(e){return{id:e.id,username:e.name||"",desp:e.desc||"",createTime:a.timesTransferToDate(e.createTime),creator:e.createUserName,editor:e.updateUserName,editTime:a.timesTransferToDate(e.updateTime),nickname:e.nickname,status:e.status,roles:e.roles}})),a.userTotalCount=e.obj&&e.obj.totalElements}})).catch((function(e){}))},timesTransferToDate:function(e){if(e){var t=new Date(Number(e)),a=t.getFullYear()+"-",i=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,n=t.getDate()<10?"0"+t.getDate():t.getDate(),o=t.getHours()<10?"0"+t.getHours():t.getHours(),r=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),l=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return a+"-"+i+"-"+n+" "+o+":"+r+":"+l}return""},v2_component_table_1578928960000:function(e){var t=this;t.selectedUserList=e||[],e.length>0?t.isDisabled=!1:t.isDisabled=!0},v2_pagination_1578929249000:function(e,t){var a=this;a.currentPage=t,a.getPageUserList(t)},v2_pagination_1578929439000:function(e,t){var a=this;a.pageSize=t,a.getPageUserList()},v2_component_btn_1578965103000:function(e){arguments.length>1&&void 0!==arguments[1]||this.$refs["v2-component-btn_1578539012886"];var t=this;t.currentPage=1,t.getPageUserList()}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},deactivated:function(){},activated:function(){}},s=l,c=a("2877"),u=Object(c["a"])(s,i,n,!1,null,null,null);t["default"]=u.exports}}]);