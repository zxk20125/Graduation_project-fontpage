(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["role-componentAuthority"],{"1fdf":function(e,t,o){var n=o("681b");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var s=o("499e").default;s("44febc07",n,!0,{sourceMap:!1,shadowMode:!1})},"276c":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"component-authority-page-wrap"},[o("el-table",{ref:"componentTable",staticClass:"component-table",staticStyle:{width:"100%"},attrs:{data:e.componentTableData,"row-class-name":"component-table-row","header-row-class-name":"component-table-header-row","default-sort":{prop:"desp",order:"descending"}}},[o("el-table-column",{attrs:{prop:"desp",label:"页面","min-width":"150",sortable:"","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{label:"组件权限","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-checkbox-group",{on:{change:function(o){return e.widgetsChange(t.row)}},model:{value:t.row.checkedWidgets,callback:function(o){e.$set(t.row,"checkedWidgets",o)},expression:"scope.row.checkedWidgets"}},e._l(t.row.widget,(function(t){return o("el-checkbox",{key:t.wid,attrs:{label:t.wid}},[e._v(e._s(t.desp))])})),1)]}}])}),o("el-table-column",{attrs:{width:"50",label:"全选"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-checkbox",{on:{change:function(o){return e.handleCheckAllChange(t.row)}},model:{value:t.row.checkAll,callback:function(o){e.$set(t.row,"checkAll",o)},expression:"scope.row.checkAll"}})]}}])})],1),o("div",{staticClass:"footer-btn-ctn"},[o("el-button",{staticClass:"common-cancel-btn",on:{click:e.cancelAssociate}},[e._v("取消")]),o("el-button",{staticClass:"common-confirm-btn",attrs:{type:"primary"},on:{click:e.sureAssociate}},[e._v("确定")])],1)],1)},s=[],r=(o("8e6e"),o("ac6a"),o("456d"),o("ade3"));function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){Object(r["a"])(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var a=o("960e"),l={mixins:[],components:{},data:function(){return{roleId:"",componentTableData:[],permissionsMap:{},checkAll:!1}},props:{},methods:{getPermissionsList:function(){var e=this;e.$axios.get("".concat(axios.server,"/role/get/permissions/").concat(e.roleId)).then((function(t){if(t&&t.success&&(e.permissionsMap=t.obj&&t.obj.permissions||{},a&&!$.isEmptyObject(a))){var o=[];for(var n in a)o.push(i(i({},a[n]),{},{checkedWidgets:e.permissionsMap[n]||[],checkAll:a[n]&&a[n].widget&&e.permissionsMap[n]&&a[n].widget.length===e.permissionsMap[n].length}));e.componentTableData=[].concat(o)}}))},handleCheckAllChange:function(e){e.checkAll?e.checkedWidgets=e.widget.map((function(e){return e.wid})):e.checkedWidgets=[]},widgetsChange:function(e){e.checkedWidgets.length&&e.checkedWidgets.length===e.widget.length?e.checkAll=!0:e.checkAll=!1},cancelAssociate:function(){this.$root.cancel()},sureAssociate:function(){for(var e=this,t={},o=0;o<e.componentTableData.length;o++){var n=e.componentTableData[o];t[n.path]=n.checkedWidgets}e.$axios.post("".concat(axios.server,"/role/update/permissions/").concat(e.roleId),{permissions:t}).then((function(t){t&&t.success&&e.$root.confirm()}))}},mounted:function(){var e=this;e.roleId=this.$parent&&this.$parent.params&&this.$parent.params.id,this.getPermissionsList()},beforeDestroy:function(){},destroyed:function(){},computed:{},watch:{}},p=l,d=(o("6947"),o("2877")),u=Object(d["a"])(p,n,s,!1,null,null,null);t["default"]=u.exports},"681b":function(e,t,o){t=e.exports=o("2350")(!1),t.push([e.i,".component-authority-page-wrap{overflow-y:auto}.component-authority-page-wrap .footer-btn-ctn{position:absolute;bottom:0;left:0;right:0;border-top:1px solid #e7ecef;text-align:right}.component-authority-page-wrap .footer-btn-ctn .el-button{height:32px;line-height:32px;padding:0 20px;margin:10px 20px 10px 0}.permission-dialog .aweb-dialog__header{height:44px;-webkit-box-sizing:border-box;box-sizing:border-box}.permission-dialog div.aweb-dialog__body{padding-bottom:0}",""])},6947:function(e,t,o){"use strict";o("1fdf")},"960e":function(e){e.exports=JSON.parse('{"user/userList":{"path":"user/userList","desp":"用户管理","widget":[{"wid":1578539296885,"desp":"删除"}]},"menu/menuList":{"path":"menu/menuList","desp":"菜单管理","widget":[{"wid":1578539271197,"desp":"新增菜单"},{"wid":1578539296885,"desp":"删除"}]},"role/roleList":{"path":"role/roleList","desp":"角色管理","widget":[{"wid":1579058632986,"desp":"导出excel"},{"wid":1579239830566,"desp":"导出pdf"}]}}')}}]);