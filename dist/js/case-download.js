(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["case-download"],{8295:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v2container",{staticClass:"V2Container",staticStyle:{display:"flex","align-items":"center","align-self":"stretch",height:"auto","box-sizing":"border-box",width:"90%","flex-direction":"column","flex-shrink":"0","min-height":"20px"},attrs:{wid:"root"}},[o("div",{ref:"v2Container_5",staticClass:"V2Container",staticStyle:{display:"flex","align-items":"flex-start","align-self":"stretch",height:"auto","box-sizing":"border-box",width:"100%","flex-shrink":"0","flex-direction":"column"},attrs:{wid:"1602209380851"}},[o("div",{ref:"v2ComponentText_24",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","font-size":"25px","margin-top":"10px","margin-bottom":"20px"},attrs:{wid:"1602229222232",component:"v2-component-text"}},[o("p",{style:{"font-weight":"bold","word-break":"break-all"}},[t._v("\n                使用上传组件实现上传\n            ")])]),o("div",{ref:"v2Container_6",staticClass:"V2Container",staticStyle:{display:"flex","align-items":"flex-start","align-self":"stretch",height:"auto","box-sizing":"border-box",width:"100%","flex-shrink":"0","flex-direction":"column","border-style":"solid","border-color":"rgb(4,190,189)","border-width":"5px","border-right-width":"0","border-left-width":"5px","border-top-width":"0","border-bottom-width":"0","background-color":"rgb(242,242,242)","margin-bottom":"20px"},attrs:{wid:"1602209450917"}},[o("div",{ref:"v2ComponentText_7",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px","font-size":"15px"},attrs:{wid:"1602209428670",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                    在基础组件拖拽一个上传组件到页面上,然后在上传组件的配置项里面,有个上传地址,这个就是后台的接口地址,比如本次的案例的后台地址'/file2/upload',由于后台在文件上传的时候需要hearders带有token,下面按钮点击之后就能为上传组件增加一个token值,这个一般都是放在生命周期靠前位置,比如mounted的时候就添加,本次为演示\n                ")])])]),o("div",{ref:"v2Container_12",staticClass:"V2Container",staticStyle:{display:"flex","align-items":"flex-start","align-self":"stretch",height:"auto","box-sizing":"border-box",width:"100%","flex-shrink":"0"},attrs:{wid:"1602295760895"}},[o("v2-form-input",{ref:"v2FormInput_1",staticClass:"V2Widget",style:{"flex-shrink":"0","margin-bottom":"20px"},attrs:{wid:"1602295787041",theme:{size:""},disabled:!1,label:"filePartId",placeholder:"请输入分片标识","title-mode":"col","label-witdh":"80px","input-type":"text",rows:2,"show-word-limit":!1,clearable:!1,"is-required":!1,"auto-complete":!1,value:t.filePartId},on:{"update:value":function(e){t.filePartId=e}}}),o("v2-form-input",{ref:"v2FormInput_2",staticClass:"V2Widget",style:{"flex-shrink":"0","margin-left":"20px"},attrs:{wid:"1602295826677",theme:{size:""},disabled:!1,label:"filePart",placeholder:"请输入分片信息","title-mode":"col","label-witdh":"80px","input-type":"text",rows:2,"show-word-limit":!1,clearable:!1,"is-required":!1,"auto-complete":!1,value:t.filePart},on:{"update:value":function(e){t.filePart=e}}})],1),o("v2-component-btn",{ref:"v2ComponentBtn_3",staticClass:"v2-component-btn-1602211610578 V2Widget",style:{"flex-shrink":"0","margin-bottom":"10px"},attrs:{wid:"1602211610578",theme:{btnType:"primary",size:""},disabled:!1,loading:!1,"btn-name":"点击为上传组件增加token,分片参数",shape:"def"},on:{"_op_component-btn_btn:click":t._op_componentBtn_btn_1602211540144}}),o("v2-form-upload",{ref:"v2FormUpload_1",staticClass:"v2-form-upload-1602209471420 V2Widget",style:{"flex-shrink":"0"},attrs:{wid:"1602209471420",action:t.uploadUrl,"success-callback":"successCallback",disabled:!1,type:"normal","list-type":"text","limit-type":"*",limit:3,"limit-size":5e4,"auto-upload":!0,"btn-text":"选择文件","btn-upload-text":"上传",prompt:"可以选择任意文件进行上传","is-required":!1,label:"使用上传组件","label-witdh":"100px","title-mode":"col"}})],1),o("div",{ref:"v2Container_9",staticClass:"V2Container",staticStyle:{display:"flex","align-items":"flex-start","align-self":"stretch",height:"auto","box-sizing":"border-box",width:"100%","flex-shrink":"0","flex-direction":"column"},attrs:{wid:"1602232412538"}},[o("div",{ref:"v2Container_11",staticClass:"V2Container",staticStyle:{display:"flex","align-items":"flex-start","align-self":"stretch",height:"auto","box-sizing":"border-box","flex-shrink":"0","flex-direction":"column","border-style":"solid","border-color":"rgb(4,190,189)","border-width":"5px","border-right-width":"0","border-left-width":"5px","border-top-width":"0","border-bottom-width":"0","background-color":"rgb(242,242,242)","margin-top":"20px","margin-bottom":"20px","min-height":"20px",width:"100%"},attrs:{wid:"1602232559435"}},[o("div",{ref:"v2ComponentText_25",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","font-size":"15px","margin-top":"10px","margin-bottom":"10px","margin-left":"10px","margin-right":"10px"},attrs:{wid:"1602232483952",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                    ctx.__getVueIns('1602209471420').$refs._op_formUpload_upload.headers = {                 \"X-CSRF-TOKEN\":window.sessionStorage.getItem('token'),                 \"filePartId\":'a',                 \"filePart\":'1/4'             };\n                ")])]),o("div",{ref:"v2ComponentText_27",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","font-size":"15px","margin-bottom":"5px","margin-left":"10px","margin-right":"10px"},attrs:{wid:"1602236672490",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                    X-CSRF-TOKEN：获取登陆之后的token值，获取方式window.sessionStorage.getItem('token')\n                ")])]),o("div",{ref:"v2ComponentText_26",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","font-size":"15px","margin-bottom":"5px","margin-left":"10px","margin-right":"10px"},attrs:{wid:"1602236703851",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                    filePartId：分片标识。使用分片上传时前端需要为文件的分片生成一个统一的分片字符串标识，方便后端识别，合并。(如果不分片可以为空)\n                ")])]),o("div",{ref:"v2ComponentText_28",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","font-size":"15px","margin-bottom":"10px","margin-right":"10px","padding-left":"10px"},attrs:{wid:"1602236834095",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v('\n                    filePart：分片信息。值的格式为 currentPart/total ，其中currentPart为当前分片数，total为总分片数，例如上传4个分片中的第一块分片为"1/4"。(如果不分片可以为空)\n                ')])])])]),o("div",{ref:"v2ComponentText_29",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0"},attrs:{wid:"1602295788351",component:"v2-component-text"}}),o("div",{ref:"v2Container_13",staticClass:"V2Container",staticStyle:{display:"flex","align-items":"flex-start","align-self":"stretch",height:"auto","box-sizing":"border-box","flex-shrink":"0","justify-content":"center"},attrs:{wid:"1602487129454"}},[o("div",{ref:"v2ComponentText_31",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","font-size":"20px"},attrs:{wid:"1602487129039",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                返回数据为： \n            ")])]),o("div",{ref:"v2ComponentText_30",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","font-size":"20px","margin-bottom":"20px"},attrs:{wid:"1602296092477",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                "+t._s(t.successData)+"\n            ")])])]),o("div",{ref:"v2Container_4",staticClass:"V2Container",staticStyle:{display:"flex","align-items":"flex-start","align-self":"stretch",height:"auto","box-sizing":"border-box",width:"100%","flex-shrink":"0","flex-direction":"column"},attrs:{wid:"1601121755648"}},[o("div",{ref:"v2ComponentText_6",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","font-size":"25px","margin-bottom":"20px"},attrs:{wid:"1601121908136",component:"v2-component-text"}},[o("p",{style:{"font-weight":"bold","word-break":"break-all"}},[t._v("\n                调用管道封装的方法进行下载操作\n            ")])]),o("v2-form-input",{ref:"v2FormInput_3",staticClass:"V2Widget",style:{"flex-shrink":"0"},attrs:{wid:"1602486224131",theme:{size:""},disabled:!1,label:"下载文件",placeholder:"请输入下载文件名","title-mode":"col","label-witdh":"100px","input-type":"text",rows:2,"show-word-limit":!1,clearable:!1,"is-required":!0,"auto-complete":!1,value:t.filePath},on:{"update:value":function(e){t.filePath=e}}}),o("v2-component-btn",{ref:"v2ComponentBtn_1",staticClass:"V2Widget",style:{"margin-top":"20px","margin-left":"10px"},attrs:{wid:"1600581961819",theme:{btnType:"primary",size:""},disabled:!1,loading:!1,"btn-name":"下载",shape:"round"},on:{"_op_component-btn_btn:click":t._op_componentBtn_btn_1600581899716}}),o("div",{ref:"v2Container_7",staticClass:"V2Container",staticStyle:{display:"flex","align-items":"flex-start","align-self":"stretch",height:"auto","box-sizing":"border-box",width:"100%","flex-shrink":"0","flex-direction":"column","border-style":"solid","border-color":"rgb(4,190,189)","border-width":"5px","border-right-width":"0","border-left-width":"5px","border-top-width":"0","border-bottom-width":"0","background-color":"rgb(242,242,242)","margin-top":"20px"},attrs:{wid:"1602225149295"}},[o("div",{ref:"v2Container_8",staticClass:"V2Container",staticStyle:{display:"flex","align-items":"flex-start","align-self":"stretch",height:"auto","box-sizing":"border-box",width:"100%","flex-shrink":"0","flex-direction":"column","margin-top":"10px","margin-bottom":"10px","margin-left":"10px"},attrs:{wid:"1602226699428"}},[o("div",{ref:"v2ComponentText_9",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","font-size":"15px"},attrs:{wid:"1602226733000",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                        调用已经封装好的下载管道,代码案例如下,在管道的封装方法中有更为详细的说明文档\n                    ")])]),o("div",{ref:"v2ComponentText_10",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","font-size":"15px"},attrs:{wid:"1602226769889",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                        pipe.download({\n                    ")])]),o("div",{ref:"v2ComponentText_11",staticClass:"v2-component-text-1602226821806 V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","margin-left":"10px","font-size":"15px"},attrs:{wid:"1602226821806",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                            data:{filePath:'/2020-10-16/1602817806380.zip'},\n                    ")])]),o("div",{ref:"v2ComponentText_12",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","margin-left":"10px","font-size":"15px"},attrs:{wid:"1602226797011",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                           // 下载服务器上面的文件的路径，这个文件路径是自己上传的，如果要测试，自己上传看返回数据路径\n                    ")])]),o("div",{ref:"v2ComponentText_13",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","margin-left":"10px","font-size":"15px"},attrs:{wid:"1602226828485",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                         type:'get',\n                    ")])]),o("div",{ref:"v2ComponentText_14",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","margin-left":"10px","font-size":"15px"},attrs:{wid:"1602226810350",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                        // 下载请求是get请求\n                    ")])]),o("div",{ref:"v2ComponentText_15",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","margin-left":"10px","font-size":"15px"},attrs:{wid:"1602226877899",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                        url:'$ {axios.server}/file2/download'\n                    ")])]),o("div",{ref:"v2ComponentText_16",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","margin-left":"10px","font-size":"15px"},attrs:{wid:"1602226795758",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                            // 下载的后台接口路径\n                    ")])]),o("div",{ref:"v2ComponentText_17",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","margin-left":"10px","font-size":"15px"},attrs:{wid:"1602226897611",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                            success(response){\n                    ")])]),o("div",{ref:"v2ComponentText_18",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","margin-left":"10px","font-size":"15px"},attrs:{wid:"1602226839901",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                         if(response.status){ if(response.status){\n                    ")])]),o("div",{ref:"v2ComponentText_19",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","margin-left":"10px","font-size":"15px"},attrs:{wid:"1602226854013",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                         console.log('下载成功');\n                    ")])]),o("div",{ref:"v2ComponentText_20",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","margin-left":"10px","font-size":"15px"},attrs:{wid:"1602226901983",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                          }else{\n                    ")])]),o("div",{ref:"v2ComponentText_21",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","margin-left":"10px","font-size":"15px"},attrs:{wid:"1602226872335",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                         console.log('下载失败',response); }\n                    ")])]),o("div",{ref:"v2ComponentText_22",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","margin-left":"10px","font-size":"15px"},attrs:{wid:"1602227021943",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                           }\n                    ")])]),o("div",{ref:"v2ComponentText_23",staticClass:"V2Widget",staticStyle:{"box-sizing":"border-box","flex-shrink":"0","font-size":"15px"},attrs:{wid:"1602226986142",component:"v2-component-text"}},[o("p",{style:{"word-break":"break-all"}},[t._v("\n                        })\n                    ")])])])])],1)])},n=[],a=o("25f3"),r=o("a6fc"),s={mixins:[r["b"],a["d"]],components:{},data:function(){return{CONTENT:{forms_v2:{config:[],validate_callbacks:[],submit_callbacks:[]},mapping:{1600656088834:[],1600660435781:[{id:1600660435781,modelValue:"value",dataValue:"path1",type:""},{id:1600660435781,modelValue:"successCallback",dataValue:"path2",type:""},{id:1600660435781,modelValue:"action",dataValue:"path3",type:""},{id:1600660435781,modelValue:"data",dataValue:"path4",type:""},{id:1600660435781,modelValue:"fileName",dataValue:"path5",type:""}],1600842741970:[{id:1600842741970,modelValue:"action",dataValue:"uploadUrl",type:""}],1602209471420:[{id:1602209471420,modelValue:"action",dataValue:"uploadUrl",type:""}],1602296092477:[{id:1602296092477,modelValue:"text",dataValue:"successData",type:""}],1602295787041:[{id:1602295787041,modelValue:"value",dataValue:"filePartId",type:""}],1602295826677:[{id:1602295826677,modelValue:"value",dataValue:"filePart",type:""}],1602486224131:[{id:1602486224131,modelValue:"value",dataValue:"filePath",type:""}]}},filePartId:"",filePart:"",successData:"后台传回来数据",filePath:"/2020-10-16/1602817806380.zip",__VERSION:4}},props:{},computed:{uploadUrl:function(){return"".concat(axios.server,"/file2/upload")}},watch:{},methods:{_op_componentBtn_btn_1600581899716:function(t){arguments.length>1&&void 0!==arguments[1]||this.$refs["v2ComponentBtn_1"];var e=this;console.log(123),""!=e.filePath?pipe.download({data:{filePath:e.filePath},type:"get",url:"".concat(axios.server,"/file2/download"),success:function(t){200==t.status?e.$message({type:"success",message:"开始下载，请稍候…"}):e.$message({type:"error",message:"下载失败，请确认输入框是否为返回文件名…"})}}):e.$message({type:"error",message:"请输入下载文件名"})},_op_componentBtn_btn_1600659528685:function(t){},_op_componentBtn_btn_1602211540144:function(t){arguments.length>1&&void 0!==arguments[1]||this.$refs["v2ComponentBtn_3"];var e=this;e.__getVueIns("1602209471420").$refs._op_formUpload_upload.headers={"X-CSRF-TOKEN":window.sessionStorage.getItem("token"),filePartId:e.filePartId,filePart:e.filePart},e.__getVueIns("1602209471420").$refs._op_formUpload_upload.headers&&(e.successData="增加token成功",console.log("增加token成功",e.__getVueIns("1602209471420").$refs._op_formUpload_upload.headers)),e.successCallback()},successCallback:function(t,e,o){var i=this;console.log(t),console.log(e),console.log(FileList),i.successData=t}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},deactivated:function(){},activated:function(){}},l=s,d=o("2877"),p=Object(d["a"])(l,i,n,!1,null,null,null);e["default"]=p.exports}}]);