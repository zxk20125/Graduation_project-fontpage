{
    "structure": {
        "__resolveFromCode": false,
        "children": [
            {
                "__resolveFromCode": false,
                "children": [],
                "component": "v2-form-input",
                "id": 1578880992719,
                "customClass": [
                    "form-item-block"
                ],
                "commonStyle": {
                    "position": "relative",
                    "margin-top": "10px",
                    "margin-bottom": "10px",
                    "margin-left": "10px",
                    "margin-right": "10px",
                    "align-self": "auto",
                    "overflow": "hidden",
                    "animation-duration": "1s"
                },
                "props": [
                    "value",
                    "disabled",
                    "label",
                    "placeholder",
                    "prepend",
                    "append",
                    "titleMode",
                    "labelWitdh",
                    "inputType",
                    "rows",
                    "maxlength",
                    "minlength",
                    "prefixIcon",
                    "suffixIcon",
                    "showWordLimit",
                    "clearable",
                    "isRequired",
                    "autoComplete",
                    "suggestion",
                    "visible",
                    "if",
                    "customClass"
                ],
                "disabled": "${isDisable}",
                "theme": {},
                "label": "角色名",
                "placeholder": "请输入角色名",
                "titleMode": "col",
                "labelWitdh": "80px",
                "inputType": "text",
                "rows": 2,
                "showWordLimit": false,
                "clearable": false,
                "isRequired": true,
                "autoComplete": false,
                "$ref": "v2-form-input_1578880992719",
                "value.sync": "${roleName}",
                "style": {
                    "label": {}
                },
                "visible": true,
                "__capacity": "1",
                "href": "v2-form-input",
                "events": {},
                "pid": "root",
                "sizeLocked": {
                    "widthLock": false,
                    "heightLock": false
                },
                "animate": [
                    "",
                    "animated"
                ],
                "value": "${roleName}"
            },
            {
                "__resolveFromCode": false,
                "children": [],
                "component": "v2-form-input",
                "id": 1578881040593,
                "customClass": [
                    "form-textarea-margin",
                    "v2-form-input-1578881040593"
                ],
                "commonStyle": {
                    "position": "relative",
                    "margin-top": "10px",
                    "margin-bottom": "10px",
                    "margin-left": "10px",
                    "margin-right": "10px",
                    "align-self": "auto",
                    "overflow": "hidden",
                    "animation-duration": "1s"
                },
                "props": [
                    "value",
                    "disabled",
                    "label",
                    "placeholder",
                    "prepend",
                    "append",
                    "titleMode",
                    "labelWitdh",
                    "inputType",
                    "rows",
                    "maxlength",
                    "minlength",
                    "prefixIcon",
                    "suffixIcon",
                    "showWordLimit",
                    "clearable",
                    "isRequired",
                    "autoComplete",
                    "suggestion",
                    "visible",
                    "if",
                    "customClass"
                ],
                "theme": {
                    "size": ""
                },
                "disabled": false,
                "label": "描述",
                "placeholder": "请填写描述",
                "titleMode": "col",
                "labelWitdh": "80px",
                "inputType": "textarea",
                "rows": 5,
                "maxlength": 200,
                "showWordLimit": true,
                "clearable": false,
                "isRequired": false,
                "autoComplete": false,
                "$ref": "v2-form-input_1578881040593",
                "value.sync": "${desp}",
                "style": {
                    "label": {}
                },
                "visible": true,
                "__capacity": "1",
                "href": "v2-form-input",
                "events": {},
                "pid": "root",
                "sizeLocked": {
                    "widthLock": false,
                    "heightLock": false
                },
                "animate": [
                    "",
                    "animated"
                ],
                "value": "${desp}"
            },
            {
                "__resolveFromCode": false,
                "children": [
                    {
                        "__resolveFromCode": false,
                        "children": [],
                        "component": "v2-component-btn",
                        "id": 1578881089113,
                        "customClass": [
                            "common-btn-normal"
                        ],
                        "commonStyle": {
                            "position": "relative",
                            "margin-top": "10px",
                            "margin-bottom": "10px",
                            "margin-left": "10px",
                            "margin-right": "10px",
                            "align-self": "auto",
                            "flex-shrink": "0",
                            "overflow": "hidden",
                            "animation-duration": "1s"
                        },
                        "props": [
                            "disabled",
                            "loading",
                            "btnName",
                            "leftIcon",
                            "rightIcon",
                            "shape",
                            "visible",
                            "if",
                            "customClass"
                        ],
                        "theme": {
                            "btnType": "normal",
                            "size": ""
                        },
                        "disabled": false,
                        "loading": false,
                        "btnName": "取消",
                        "shape": "plain",
                        "events": {
                            "_op_componentBtn_btn": {
                                "click": {
                                    "v2_component_btn_1578894579000": {}
                                }
                            }
                        },
                        "$ref": "v2-component-btn_1578881089113",
                        "style": {
                            "btnStyle": {}
                        },
                        "visible": true,
                        "__capacity": "1",
                        "href": "v2-component-btn",
                        "pid": 1578881127712,
                        "sizeLocked": {
                            "widthLock": false,
                            "heightLock": false
                        },
                        "animate": [
                            "",
                            "animated"
                        ]
                    },
                    {
                        "__resolveFromCode": false,
                        "children": [],
                        "component": "v2-component-btn",
                        "id": 1578881126091,
                        "customClass": [
                            "common-btn-focus",
                            "margin-right20"
                        ],
                        "commonStyle": {
                            "position": "relative",
                            "margin-top": "10px",
                            "margin-bottom": "10px",
                            "margin-left": "10px",
                            "margin-right": "10px",
                            "align-self": "auto",
                            "overflow": "hidden",
                            "animation-duration": "1s"
                        },
                        "props": [
                            "disabled",
                            "loading",
                            "btnName",
                            "leftIcon",
                            "rightIcon",
                            "shape",
                            "visible",
                            "if",
                            "customClass"
                        ],
                        "theme": {
                            "btnType": "primary",
                            "size": ""
                        },
                        "disabled": false,
                        "loading": false,
                        "btnName": "提交",
                        "shape": "def",
                        "$ref": "v2-component-btn_1578881126091",
                        "style": {
                            "btnStyle": {}
                        },
                        "visible": true,
                        "__capacity": "1",
                        "href": "v2-component-btn",
                        "events": {
                            "_op_componentBtn_btn": {}
                        },
                        "pid": 1578881127712,
                        "sizeLocked": {
                            "widthLock": false,
                            "heightLock": false
                        },
                        "animate": [
                            "",
                            "animated"
                        ]
                    }
                ],
                "component": "v2Container",
                "id": 1578881127712,
                "customClass": [
                    "diaglog-btn-ctn"
                ],
                "commonStyle": {
                    "position": "relative",
                    "box-sizing": "border-box",
                    "align-self": "stretch",
                    "overflow": "hidden",
                    "display": "flex",
                    "flex-direction": "row",
                    "justify-content": "flex-end",
                    "align-items": "flex-start",
                    "min-width": "50px",
                    "min-height": "50px",
                    "animation-duration": "1s",
                    "height": "auto"
                },
                "$ref": "v2Container_1578881127712",
                "href": "v2Container",
                "direction": "col",
                "style": {},
                "pid": "root",
                "ctnStyle": [
                    {},
                    {}
                ],
                "sizeLocked": {
                    "widthLock": false,
                    "heightLock": false
                },
                "animate": [
                    "",
                    "animated"
                ],
                "props": [
                    "visible",
                    "if",
                    "element-loading-text",
                    "element-loading-spinner",
                    "element-loading-background",
                    "customClass"
                ]
            }
        ],
        "component": "v2Container",
        "id": "root",
        "commonStyle": {
            "display": "block",
            "flex-direction": "column",
            "align-items": "flex-start",
            "align-self": "stretch",
            "min-width": "50px",
            "min-height": "50px",
            "animation-duration": "1s",
            "box-sizing": "border-box"
        },
        "customClass": [
            "form-user-info-wrapper"
        ],
        "$ref": "v2Container_root",
        "direction": "row",
        "layout": [
            100
        ],
        "style": {
            "width": "100%",
            "height": "100%"
        },
        "data": {},
        "events": {},
        "ctnStyle": [
            {},
            {},
            {}
        ],
        "realSize": [],
        "sizeLocked": {
            "widthLock": false,
            "heightLock": false
        },
        "animate": [
            "",
            "animated",
            ""
        ],
        "props": [
            "visible",
            "if",
            "element-loading-text",
            "element-loading-spinner",
            "element-loading-background",
            "customClass"
        ]
    },
    "forms": [
        {
            "name": "roleForm",
            "desc": "角色信息表单",
            "validate_when": "blur",
            "validate_callback": "(function(result, ctx, resolve, reject){\n    /**\n     *  result: {\n     *      ok: boolean,\n     *      child_results: Array<{\n     *          ok: boolean,  // 输入是否正确\n     *          message?: string,  // 错误提示\n     *          fieldName: string,  // 字段名\n     *          fieldDesc: string,  // 字段描述\n     *          wid: string,  // 输入组件 ID\n     *          vueIns: VueComponent  // 输入组件实例\n     *      }>\n     *  }  // 校验结果列表\n     *  ctx: VueComponent  // 页面的组件实例\n     *  resolve: () => void  // 校验完成，可以提交\n     *  reject: () => void  // 校验完成，不能提交\n     */\n    console.log('字段:')\n    result.child_results.forEach(r => {\n        if (r.ok) {\n            console.log(r.fieldName, '输入正确')\n        } else {\n            console.log(r.fieldName, '输入不正确', r.message)\n        }\n        if (r.vueIns.$showResult) {\n            // 在 r 所对应的组件上显示错误提示，\n            // 若无错误则清除提示。入参 { ok: boolean, message?: string }\n            r.vueIns.$showResult(r)\n        }\n    })\n    if (result.ok) {\n        console.log('=> 表单输入正确，验证通过')\n        resolve()\n    } else {\n        console.log('=> 表单输入不正确')\n        reject()\n    }\n})",
            "submit_emitters": [
                {
                    "widget_id": 1578881126091,
                    "event": "(default)"
                }
            ],
            "submit_callback": "(function(data, ctx){\n    /**\n     *  data: { [key: string]: string }  // 要提交的数据\n     *  ctx: VueComponent  // 页面的组件实例\n     */\n\n    var params = {\n        desc:data.desp||'',\n        name:data.roleName||''\n    };\n    if(ctx.AParams.id){\n        params.id = ctx.AParams.id;\n        ctx.$axios.post(`${axios.server}/role/update`,params).then(res=>{\n\n            if(res.success){\n                ctx.$notify({\n                    title: '编辑角色成功',\n                    type: 'success'\n                });\n                ctx.$root.confirm();\n                ctx.close();\n            }else{\n                ctx.$notify({\n                    title: res.msg,\n                    type: 'error'\n                });\n                ctx.close();\n            }\n        }).catch(error=>{\n            console.log(error);\n        })\n    }else{\n        ctx.$axios.post(`${axios.server}/role/add`,params).then(res=>{\n\n            if(res.success){\n                ctx.$notify({\n                    title: '新增角色成功',\n                    type: 'success'\n                });\n                ctx.$root.confirm();\n                ctx.close();\n            }else{\n                ctx.$notify({\n                    title: res.msg,\n                    type: 'error'\n                });\n                //ctx.close();\n            }\n        }).catch(error=>{\n            console.log(error);\n        })\n    }\n\n})",
            "inputs": {
                "1578880992719": {
                    "desc": "角色名",
                    "validation": {
                        "kind": "single-regexp",
                        "value": {
                            "value": "ROLE_[A-Z_]+",
                            "message": "角色名以ROLE_开头，只包含大写字母和下划线"
                        }
                    },
                    "name": "roleName"
                },
                "1578881040593": {
                    "desc": "描述",
                    "validation": {
                        "kind": "single-js",
                        "value": {
                            "value": "(value, vueIns, ctx) => value.length <=200",
                            "message": "角色描述长度限制为 0 到 200 个字符"
                        }
                    },
                    "name": "desp"
                },
                "1578881126091": {
                    "desc": "提交",
                    "validation": {
                        "kind": "dict",
                        "value": {
                            "ref": null,
                            "rules": [],
                            "disabled_rules": []
                        }
                    },
                    "name": "提交"
                }
            }
        }
    ],
    "logic": {
        "methods": [
            {
                "name": "v2_component_btn_1578894579000",
                "desp": "关闭新增角色子页面",
                "code": "/**\n* 事件绑定在vue实例上，第一个参数是vue实例。\n* 更多其他参数可以参考element-ui官网:https://element.eleme.cn/#/zh-CN\n**/\n\n//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\n\nctx.close();",
                "params": [
                    {
                        "name": "vueIns",
                        "desp": "组件的vue实例"
                    }
                ],
                "isEvent": true,
                "custom": true,
                "id": 1578894579000
            },
            {
                "name": "getRoleDetail",
                "desp": "获取角色详情",
                "code": "//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\n\nctx.$axios.get(`${axios.server}/role/get/${ctx.AParams.id}`).then(res=>{\n    if(res.success&&res.status){\n        ctx.roleName = res.obj&&res.obj.name;\n        ctx.desp = res.obj&&res.obj.desc;\n    }\n}).catch(error=>{\n    console.log(error);\n})",
                "params": [],
                "isEvent": false,
                "custom": true
            },
            {
                "name": "setFormToolTips",
                "desp": "显示表单提示",
                "code": "//函数内直接用ctx代替this访问vue页面的数据。\nconst ctx = this;\npipe.tooltip(this.__getVueIns('1578880992719').$refs._op_formInput_input, {\n    content: '角色名以ROLE_开头，只包含大写字母和下划线',\n    placement: 'top-start',\n    style: {// 内容的样式\n        fontSize: '12px'\n    }\n});\npipe.tooltip(this.__getVueIns('1578881040593').$refs._op_formInput_input, {\n    content: '用户描述长度限制为 0 到 200 个字符',\n    placement: 'top-start',\n    style: {// 内容的样式\n        fontSize: '12px'\n    }\n})",
                "params": [],
                "isEvent": false,
                "custom": true
            }
        ],
        "watch": {},
        "beforeCreate": {
            "code": "let ctx = this;"
        },
        "created": {
            "code": "let ctx = this;"
        },
        "beforeMount": {
            "code": "let ctx = this;"
        },
        "mounted": {
            "code": "const ctx = this;\nif(ctx.AParams.id){\n    ctx.getRoleDetail();\n    ctx.isDisable = true;\n}\nctx.setFormToolTips();"
        },
        "beforeUpdate": {
            "code": "let ctx = this;"
        },
        "updated": {
            "code": "let ctx = this;"
        },
        "beforeDestroy": {
            "code": "let ctx = this;"
        },
        "destroyed": {
            "code": "let ctx = this;"
        },
        "activated": {
            "code": "let ctx = this;"
        },
        "deactivated": {
            "code": "let ctx = this;"
        },
        "pollList": [],
        "url2data": {
            "vdaSource": []
        }
    },
    "dataBasket": {
        "data": {},
        "list": [
            {
                "desp": "角色名",
                "name": "roleName",
                "code": "``",
                "source": "pageData",
                "belongTo": "data",
                "type": "data",
                "showSet": false,
                "sync": false
            },
            {
                "desp": "描述",
                "name": "desp",
                "code": "``",
                "source": "pageData",
                "belongTo": "data",
                "type": "data",
                "showSet": false,
                "sync": false
            },
            {
                "desp": "是否禁填",
                "name": "isDisable",
                "code": "false",
                "source": "pageData",
                "belongTo": "data",
                "type": "data",
                "showSet": false,
                "sync": false
            }
        ],
        "mapping": {
            "1578880992719": [
                {
                    "id": 1578880992719,
                    "modelValue": "value",
                    "dataValue": "roleName",
                    "type": ""
                },
                {
                    "id": 1578880992719,
                    "modelValue": "disabled",
                    "dataValue": "isDisable",
                    "type": "boolean"
                }
            ],
            "1578881040593": [
                {
                    "id": 1578881040593,
                    "modelValue": "value",
                    "dataValue": "desp",
                    "type": ""
                }
            ]
        }
    },
    "events": {},
    "emitList": [],
    "display": {
        "icon": "icontongyong",
        "desp": "新增角色子页面",
        "type": "gridLayout",
        "width": "800px",
        "height": "1080px"
    },
    "originCss": ".diaglog-btn-ctn{\n    position:absolute!important;\n    bottom:0;\n    width:100%;\n    right:0;\n    border-top:1px solid #e5e5e5;\n}\n.common-btn-focus{\n   // background:#457ce2;\n    height:32px;\n   // color:#fff;\n    line-height:32px;\n    padding-top:0;\n    padding-bottom:0;\n}\n.common-btn-normal{\n    height:32px;\n    line-height:32px;\n    padding-top:0;\n    padding-bottom:0;\n    border:1px solid #dcdfe6;\n   // color:#606266;\n  //  background:#fff;\n}\n.margin-right20{\n    margin-right:0 0 20px 0!important;\n}\n.form-user-info-wrapper{\n    width:70%;\n    margin-left:auto!important;\n    margin-right:auto!important;\n}\n.margin-bottom20{\n    margin-bottom:20px;\n}\n.form-textarea-margin{\n    margin:0 0 20px 0!important;\n}",
    "cssType": "scss",
    "cssConfig": {
        "scoped": null
    },
    "nls": "",
    "mixins": [],
    "imports": [],
    "disableVueSPA": false,
    "disableSupport": false
}